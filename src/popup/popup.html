<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HeartWallet</title>
  <link rel="stylesheet" href="terminal.css">
</head>
<body>

  <!-- Disclaimer Agreement Screen (First time users - must accept before setup) -->
  <div id="screen-disclaimer" class="hidden">
    <div class="container">
      <h1 class="text-center glow"><img src="../../assets/icons/icon-16.png" alt="‚ô•" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;"> HEARTWALLET</h1>
      <p class="text-center text-warning mb-3" style="font-size: 14px; font-weight: bold;">SOFTWARE AGREEMENT</p>

      <div class="panel" style="max-height: 320px; overflow-y: auto; border-color: var(--terminal-warning); font-size: 11px; line-height: 1.5;">
        <p class="text-warning" style="font-weight: bold; margin-bottom: 12px;">IMPORTANT - PLEASE READ CAREFULLY BEFORE USING THIS SOFTWARE</p>

        <p style="margin-bottom: 10px;"><strong>1. UNAUDITED SOFTWARE</strong></p>
        <p style="margin-bottom: 10px;">This wallet has <strong>NOT</strong> been professionally audited by a third-party security firm. It may contain bugs, errors, or security vulnerabilities that could result in the partial or complete loss of your funds. Use at your own risk.</p>

        <p style="margin-bottom: 10px;"><strong>2. NO WARRANTY</strong></p>
        <p style="margin-bottom: 10px;">This software is provided "AS IS" without warranty of any kind, express or implied, including but not limited to warranties of merchantability, fitness for a particular purpose, and non-infringement.</p>

        <p style="margin-bottom: 10px;"><strong>3. LIMITATION OF LIABILITY</strong></p>
        <p style="margin-bottom: 10px;">The authors, developers, and contributors shall not be liable for any direct, indirect, incidental, special, consequential, or exemplary damages, including but not limited to loss of funds, data, or profits, arising from the use of this software.</p>

        <p style="margin-bottom: 10px;"><strong>4. IRREVERSIBLE TRANSACTIONS</strong></p>
        <p style="margin-bottom: 10px;">Blockchain transactions are <strong>permanent and irreversible</strong>. Once submitted, transactions cannot be cancelled, reversed, or refunded. You are solely responsible for verifying all transaction details before confirmation.</p>

        <p style="margin-bottom: 10px;"><strong>5. SEED PHRASE & PRIVATE KEYS</strong></p>
        <p style="margin-bottom: 10px;">Your seed phrase and private keys are the <strong>only way</strong> to access your funds. If lost, stolen, or forgotten, your funds will be <strong>permanently inaccessible</strong>. There is no recovery mechanism, customer support, or password reset.</p>

        <p style="margin-bottom: 10px;"><strong>6. REGULATORY COMPLIANCE</strong></p>
        <p style="margin-bottom: 10px;">Cryptocurrency may be regulated, restricted, or prohibited in your jurisdiction. You are solely responsible for determining whether your use of this software complies with applicable laws and regulations in your country or region.</p>

        <p style="margin-bottom: 10px;"><strong>7. NO FINANCIAL ADVICE</strong></p>
        <p style="margin-bottom: 10px;">This software does not provide financial, investment, tax, or legal advice. Any decisions you make using this software are your own. Consult qualified professionals before making financial decisions.</p>

        <p style="margin-bottom: 10px;"><strong>8. THIRD-PARTY RISKS</strong></p>
        <p style="margin-bottom: 10px;">This wallet interacts with third-party services including blockchain networks, RPC providers, and decentralized applications (dApps). We have no control over these services and accept no responsibility for their availability, security, or conduct.</p>

        <p style="margin-bottom: 10px;"><strong>9. SECURITY RECOMMENDATIONS</strong></p>
        <ul style="margin-left: 16px; margin-bottom: 12px;">
          <li><strong>DO NOT</strong> store large amounts or life savings in software wallets</li>
          <li>For significant holdings, use <strong>Ledger hardware wallet</strong> (built-in support)</li>
          <li>Software wallets are recommended for testnet, learning, or small transactions only</li>
          <li>Never share your seed phrase or private keys with anyone</li>
          <li>Always verify addresses and transaction details before signing</li>
        </ul>

        <p style="margin-bottom: 10px;"><strong>10. AGE REQUIREMENT</strong></p>
        <p style="margin-bottom: 10px;">You must be at least 18 years old or the age of legal majority in your jurisdiction to use this software.</p>

        <p style="margin-bottom: 10px;"><strong>11. UPDATES & MODIFICATIONS</strong></p>
        <p style="margin-bottom: 10px;">This software and these terms may be updated at any time. Continued use after updates constitutes acceptance of modified terms. You are responsible for keeping your software updated.</p>

        <p style="margin-bottom: 10px;"><strong>12. OPEN SOURCE</strong></p>
        <p style="margin-bottom: 10px;">This software is open source. You may inspect, modify, and distribute the code according to the license terms. See the project repository for details.</p>

        <p class="text-dim" style="font-size: 10px; margin-top: 16px;">By checking the box below, you acknowledge that you have read, understood, and agree to all terms above. See SECURITY.md for additional security information and best practices.</p>
      </div>

      <div class="form-group" style="margin-top: 16px;">
        <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer; font-size: 11px;">
          <input type="checkbox" id="disclaimer-checkbox" style="margin-top: 2px; width: 18px; height: 18px; cursor: pointer; flex-shrink: 0;" />
          <span>I am at least 18 years old, I have read and understand all terms above, and I accept full responsibility for my use of this software including any losses that may occur.</span>
        </label>
      </div>

      <div class="button-group">
        <button id="btn-accept-disclaimer" class="btn-primary" disabled>I AGREE - CONTINUE</button>
      </div>
    </div>
  </div>

  <!-- Setup Screen (First time users) -->
  <div id="screen-setup" class="hidden">
    <div class="container">
      <h1 class="text-center glow"><img src="../../assets/icons/icon-16.png" alt="‚ô•" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;"> HEARTWALLET v2.0.2</h1>
      <p class="text-center text-dim mb-3">Independent. Secure. Simple.</p>

      <div class="button-group">
        <button id="btn-create-wallet" class="btn-primary">CREATE NEW WALLET</button>
      </div>
      <div class="button-group">
        <button id="btn-import-wallet">IMPORT EXISTING WALLET</button>
      </div>
      <div class="button-group">
        <button id="btn-connect-ledger">CONNECT LEDGER</button>
      </div>

      <!-- Network Selector -->
      <div class="network-selector mt-3">
        <span class="text-dim" style="font-size: 11px;">NETWORK:</span>
        <select id="network-select-setup">
          <option value="pulsechainTestnet">PulseChain Testnet V4</option>
          <option value="pulsechain">PulseChain Mainnet</option>
          <option value="ethereum">Ethereum Mainnet</option>
          <option value="sepolia">Sepolia Testnet</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Create Wallet Screen -->
  <div id="screen-create" class="hidden">
    <div class="header">
      <div class="header-title">CREATE NEW WALLET</div>
      <button id="btn-back-from-create" class="header-btn">‚Üê</button>
    </div>

    <!-- Network Display -->
    <div class="container" style="padding-bottom: 8px; padding-top: 8px; border-bottom: 1px solid var(--terminal-border-dim);">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <span class="text-dim" style="font-size: 11px;">NETWORK:</span>
        <span id="network-display-create" class="text-bright" style="font-size: 12px;">PulseChain Testnet V4</span>
      </div>
    </div>

    <div class="container">
      <div class="form-group">
        <label class="form-label">Your Secret Recovery Phrase</label>
        <div class="panel">
          <div id="mnemonic-display" class="text-center" style="word-spacing: 8px; line-height: 1.8;">
            <!-- Mnemonic will be displayed here -->
          </div>
        </div>
        <p class="form-hint text-warning">‚ö†Ô∏è Write this down and store it safely. You'll need it to recover your wallet.</p>
      </div>

      <div class="form-group">
        <div class="panel" style="border-color: var(--terminal-warning); background: var(--terminal-bg);">
          <p class="text-warning" style="font-size: 11px; margin-bottom: 12px; line-height: 1.4;">
            ‚ö†Ô∏è Write down your recovery phrase on paper and store it safely. This is the ONLY way to recover your wallet if you forget your password or lose access. Never share it with anyone!
          </p>

          <label class="form-label" style="color: var(--terminal-warning); font-weight: bold; margin-bottom: 8px;">Verify your backup:</label>
          <p class="form-hint" style="margin-bottom: 8px;">To confirm you've written it down correctly, please enter these words from your recovery phrase:</p>

          <div style="display: grid; gap: 8px;">
            <div>
              <label class="form-label" style="font-size: 11px;">Word #<span id="verify-word-1-num">1</span>:</label>
              <input type="text" id="verify-word-1" class="form-control" placeholder="Enter word" autocomplete="off" style="font-size: 11px;" />
            </div>
            <div>
              <label class="form-label" style="font-size: 11px;">Word #<span id="verify-word-2-num">6</span>:</label>
              <input type="text" id="verify-word-2" class="form-control" placeholder="Enter word" autocomplete="off" style="font-size: 11px;" />
            </div>
            <div>
              <label class="form-label" style="font-size: 11px;">Word #<span id="verify-word-3-num">12</span>:</label>
              <input type="text" id="verify-word-3" class="form-control" placeholder="Enter word" autocomplete="off" style="font-size: 11px;" />
            </div>
          </div>
          <p id="verification-error" class="text-danger hidden" style="font-size: 11px; margin-top: 8px;"></p>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="password-create">Password</label>
        <input type="password" id="password-create" placeholder="Enter password" />
        <p class="form-hint">Min 12 characters, 1 uppercase, 1 lowercase, 1 number, 1 special character</p>
      </div>

      <div class="form-group">
        <label class="form-label" for="password-confirm">Confirm Password</label>
        <input type="password" id="password-confirm" placeholder="Confirm password" />
      </div>

      <div id="create-error" class="form-error hidden"></div>

      <div id="create-progress-container" class="progress-container hidden">
        <div class="progress-label">Creating wallet...</div>
        <div class="progress-bar-bg">
          <div id="create-progress-bar" class="progress-bar-fill"></div>
        </div>
        <div id="create-progress-text" class="progress-text">0%</div>
      </div>

      <div class="button-group">
        <button id="btn-create-submit" class="btn-primary" disabled>CREATE WALLET</button>
        <button id="btn-cancel-create">CANCEL</button>
      </div>
    </div>
  </div>

  <!-- Import Wallet Screen -->
  <div id="screen-import" class="hidden">
    <div class="header">
      <div class="header-title">IMPORT WALLET</div>
      <button id="btn-back-from-import" class="header-btn">‚Üê</button>
    </div>

    <!-- Network Display -->
    <div class="container" style="padding-bottom: 8px; padding-top: 8px; border-bottom: 1px solid var(--terminal-border-dim);">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <span class="text-dim" style="font-size: 11px;">NETWORK:</span>
        <span id="network-display-import" class="text-bright" style="font-size: 12px;">PulseChain Testnet V4</span>
      </div>
    </div>

    <div class="container">
      <div class="form-group">
        <label class="form-label" for="import-method">Import Method</label>
        <select id="import-method">
          <option value="mnemonic">12-word Recovery Phrase</option>
          <option value="privatekey">Private Key</option>
        </select>
      </div>

      <div id="import-mnemonic-group" class="form-group">
        <label class="form-label" for="import-mnemonic">Recovery Phrase</label>
        <textarea id="import-mnemonic" rows="3" placeholder="Enter your 12-word recovery phrase"></textarea>
      </div>

      <div id="import-privatekey-group" class="form-group hidden">
        <label class="form-label" for="import-privatekey">Private Key</label>
        <input type="password" id="import-privatekey" placeholder="Enter your private key (with or without 0x)" />
      </div>

      <div class="form-group">
        <label class="form-label" for="password-import">Password</label>
        <input type="password" id="password-import" placeholder="Enter password" />
        <p class="form-hint">Create a password to encrypt your wallet</p>
      </div>

      <div class="form-group">
        <label class="form-label" for="password-import-confirm">Confirm Password</label>
        <input type="password" id="password-import-confirm" placeholder="Confirm password" />
      </div>

      <div id="import-error" class="form-error hidden"></div>

      <div id="import-progress-container" class="progress-container hidden">
        <div class="progress-label">Importing wallet...</div>
        <div class="progress-bar-bg">
          <div id="import-progress-bar" class="progress-bar-fill"></div>
        </div>
        <div id="import-progress-text" class="progress-text">0%</div>
      </div>

      <div class="button-group">
        <button id="btn-import-submit" class="btn-primary">IMPORT WALLET</button>
        <button id="btn-cancel-import">CANCEL</button>
      </div>
    </div>
  </div>

  <!-- Connect Ledger Screen -->
  <div id="screen-ledger" class="hidden">
    <div class="header">
      <div class="header-title">CONNECT LEDGER</div>
      <button id="btn-back-from-ledger" class="header-btn">‚Üê</button>
    </div>

    <!-- Network Display -->
    <div class="container" style="padding-bottom: 8px; padding-top: 8px; border-bottom: 1px solid var(--terminal-border-dim);">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <span class="text-dim" style="font-size: 11px;">NETWORK:</span>
        <span id="network-display-ledger" class="text-bright" style="font-size: 12px;">PulseChain Testnet V4</span>
      </div>
    </div>

    <div class="container">
      <!-- Step 1: WebHID Support Check -->
      <div id="ledger-step-check" class="form-group">
        <div class="panel" style="border-color: var(--terminal-info);">
          <p style="font-size: 11px; line-height: 1.4; margin-bottom: 12px;">
            ‚ú® Connect your Ledger hardware wallet to use HeartWallet as your interface.
            Your private keys stay secure on the device.
          </p>
          <p class="text-dim" style="font-size: 10px; line-height: 1.4;">
            <strong>Before connecting:</strong><br>
            1. Plug in your Ledger device<br>
            2. Unlock it with your PIN<br>
            3. Open the Ethereum app on the device
          </p>
        </div>
        <div id="ledger-support-error" class="form-error hidden"></div>
      </div>

      <!-- Step 2: Connect Device -->
      <div id="ledger-step-connect" class="form-group">
        <button id="btn-ledger-connect" class="btn-primary" style="width: 100%;">CONNECT DEVICE</button>
        <p class="text-dim" style="font-size: 10px; margin-top: 8px; text-align: center;">
          This will open a browser dialog to select your Ledger
        </p>
      </div>

      <!-- Step 3: Loading State -->
      <div id="ledger-step-loading" class="form-group hidden">
        <div class="panel" style="text-align: center;">
          <p style="font-size: 11px;">‚è≥ Connecting to Ledger...</p>
          <p class="text-dim" style="font-size: 10px; margin-top: 8px;">
            Please select your device from the browser dialog
          </p>
        </div>
      </div>

      <!-- Step 4: Address Selection -->
      <div id="ledger-step-addresses" class="form-group hidden">
        <label class="form-label">Select Address</label>
        <p class="text-dim" style="font-size: 10px; margin-bottom: 12px;">
          Choose which Ledger account to add to HeartWallet:
        </p>

        <div id="ledger-address-list" class="mt-2">
          <!-- Address list will be populated by JavaScript -->
        </div>

        <div class="button-group mt-2">
          <button id="btn-ledger-load-more" class="btn-small">LOAD MORE ADDRESSES</button>
        </div>
      </div>

      <!-- Step 5: Nickname and Confirm -->
      <div id="ledger-step-confirm" class="form-group hidden">
        <div class="panel" style="background: var(--terminal-bg); border: 1px solid var(--terminal-border);">
          <p class="text-dim" style="font-size: 10px; margin-bottom: 8px;">Selected Address:</p>
          <p id="ledger-selected-address" style="font-size: 11px; word-break: break-all; color: var(--terminal-success);">
            <!-- Address will be shown here -->
          </p>
          <p class="text-dim" style="font-size: 10px; margin-top: 8px;">
            Account: <span id="ledger-selected-index">0</span> |
            Path: <span id="ledger-selected-path">m/44'/60'/0'/0/0</span>
          </p>
        </div>

        <div class="form-group">
          <label class="form-label" for="ledger-nickname">Wallet Nickname (Optional)</label>
          <input type="text" id="ledger-nickname" placeholder="e.g., Ledger 1" maxlength="20" />
        </div>

        <div class="form-group">
          <label class="form-label" for="ledger-password">HeartWallet Password</label>
          <input type="password" id="ledger-password" placeholder="Enter your password" />
          <p class="form-hint">Required to verify your identity</p>
        </div>

        <div class="panel" style="border-color: var(--terminal-info); background: var(--terminal-bg);">
          <p class="text-dim" style="font-size: 10px; line-height: 1.4;">
            ‚ÑπÔ∏è <strong>Hardware Wallet Notice:</strong><br>
            Your password is only for authentication - your Ledger's private keys stay on the device.
            You'll need to confirm transactions on your Ledger.
          </p>
        </div>
      </div>

      <div id="ledger-error" class="form-error hidden"></div>

      <!-- Action Buttons -->
      <div id="ledger-buttons" class="button-group hidden">
        <button id="btn-ledger-add" class="btn-primary">ADD LEDGER WALLET</button>
        <button id="btn-ledger-cancel">CANCEL</button>
      </div>
    </div>
  </div>

  <!-- Unlock Screen -->
  <div id="screen-unlock" class="hidden">
    <div class="container">
      <h1 class="text-center glow mb-3"><img src="../../assets/icons/icon-16.png" alt="‚ô•" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;"> HEARTWALLET v2.0.2</h1>
      <p class="text-center text-dim mb-3">Wallet Locked</p>

      <div class="form-group">
        <label class="form-label" for="password-unlock">Password</label>
        <input type="password" id="password-unlock" placeholder="Enter password" autofocus />
      </div>

      <div id="unlock-error" class="form-error hidden"></div>

      <div id="unlock-progress-container" class="progress-container hidden">
        <div class="progress-label">Decrypting...</div>
        <div class="progress-bar-bg">
          <div id="unlock-progress-bar" class="progress-bar-fill"></div>
        </div>
        <div id="unlock-progress-text" class="progress-text">0%</div>
      </div>

      <div class="button-group">
        <button id="btn-unlock" class="btn-primary">UNLOCK</button>
      </div>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div id="screen-dashboard" class="hidden">
    <div class="header">
      <div class="header-title"><img src="../../assets/icons/icon-16.png" alt="‚ô•" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;"> HEARTWALLET</div>
      <div class="header-actions">
        <button id="btn-refresh" class="header-btn" title="Refresh">‚Üª</button>
        <button id="btn-settings" class="header-btn" title="Settings">‚öô</button>
        <button id="btn-lock" class="header-btn" title="Lock">üîí</button>
      </div>
    </div>

    <div class="container">
      <!-- Network Selector -->
      <div class="network-selector mb-2">
        <span class="text-dim" style="font-size: 11px;">NETWORK:</span>
        <div style="position: relative; flex: 1;">
          <div id="network-select-custom" style="display: flex; align-items: center; gap: 8px; padding: 6px 8px; background: var(--terminal-bg); border: 1px solid var(--terminal-border); cursor: pointer; position: relative;">
            <img id="network-selector-logo" src="" alt="" style="width: 20px; height: 20px; display: none;" />
            <span id="network-selected-text" style="flex: 1;">PulseChain Testnet V4</span>
            <span style="font-size: 10px;">‚ñº</span>
          </div>
          <div id="network-dropdown-menu" class="hidden" style="position: absolute; top: 100%; left: 0; right: 0; background: var(--terminal-bg); border: 1px solid var(--terminal-border); border-top: none; z-index: 1000; max-height: 200px; overflow-y: auto;">
            <div class="network-option" data-network="pulsechainTestnet" style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-bottom: 1px solid var(--terminal-border);">
              <img src="" data-logo="pls.png" style="width: 20px; height: 20px;" />
              <span>PulseChain Testnet V4</span>
            </div>
            <div class="network-option" data-network="pulsechain" style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-bottom: 1px solid var(--terminal-border);">
              <img src="" data-logo="pls.png" style="width: 20px; height: 20px;" />
              <span>PulseChain Mainnet</span>
            </div>
            <div class="network-option" data-network="ethereum" style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer; border-bottom: 1px solid var(--terminal-border);">
              <img src="" data-logo="eth.png" style="width: 20px; height: 20px;" />
              <span>Ethereum Mainnet</span>
            </div>
            <div class="network-option" data-network="sepolia" style="display: flex; align-items: center; gap: 8px; padding: 8px; cursor: pointer;">
              <img src="" data-logo="eth.png" style="width: 20px; height: 20px;" />
              <span>Sepolia Testnet</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Wallet Selector -->
      <div class="network-selector mb-2">
        <span class="text-dim" style="font-size: 11px;">WALLET:</span>
        <select id="wallet-select">
          <option value="">Loading wallets...</option>
        </select>
      </div>

      <!-- Balance Display -->
      <div class="balance-box">
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
          <img id="network-logo" src="" alt="Network" style="width: 48px; height: 48px; display: none;" />
          <div style="display: flex; align-items: center; gap: 6px;">
            <div class="balance-label">BALANCE</div>
            <div class="balance-label" id="balance-symbol">PLS</div>
          </div>
        </div>
        <div class="balance-amount" id="balance-amount" title="">0.00000000</div>
        <div id="balance-usd" style="font-size: 16px; color: var(--terminal-fg-dim); margin-top: 4px; text-align: center;">‚Äî</div>
        <div id="price-loading" class="hidden" style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 4px; font-size: 12px; color: var(--terminal-fg-dim);">
          <div class="loading-spinner"></div>
          <span>Loading prices...</span>
        </div>
      </div>

      <!-- Address Display -->
      <div class="form-group">
        <label class="form-label">Address</label>
        <div class="address-display">
          <div class="address-text" id="wallet-address">0x0000...0000</div>
          <button class="copy-btn" id="btn-copy-address">COPY</button>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="button-group">
        <button id="btn-send">SEND</button>
        <button id="btn-receive">RECEIVE</button>
        <button id="btn-tokens">TOKENS</button>
      </div>

      <!-- Transaction History Button -->
      <div class="mt-2">
        <button id="btn-tx-history" style="width: 100%; padding: 8px; background: var(--terminal-bg); border: 1px solid var(--terminal-border); color: var(--terminal-fg); cursor: pointer; font-family: var(--font-mono);">
          üìú TRANSACTION HISTORY
        </button>
      </div>

      <!-- Pending Transactions Indicator -->
      <div id="pending-tx-indicator" class="hidden mt-2" style="background: var(--terminal-warning); color: #000; padding: 8px; text-align: center; cursor: pointer; border-radius: 4px;">
        <span id="pending-tx-text">‚ö†Ô∏è 0 Pending Transactions</span>
      </div>
    </div>
  </div>

  <!-- Send Screen -->
  <div id="screen-send" class="hidden">
    <div class="header">
      <div class="header-title">SEND</div>
      <button id="btn-back-from-send" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <!-- Send Form (hidden after sending) -->
      <div id="send-form">
        <div class="panel">
          <p class="text-dim mb-2" style="font-size: 11px;">From</p>
          <p style="font-family: var(--font-mono); font-size: 12px; word-break: break-all;" id="send-from-address">
            0x0000...0000
          </p>
        </div>

        <div class="panel">
          <div class="form-group">
            <label class="form-label">Asset</label>
            <select id="send-asset-select" class="form-control">
              <option value="native">Native (PLS)</option>
            </select>
          </div>

          <p class="text-dim mt-2" style="font-size: 11px;">
            Available: <span id="send-available-balance" style="cursor: help;" title="">0</span> <span id="send-balance-symbol">tPLS</span>
          </p>
        </div>

        <div class="panel">
          <div class="form-group">
            <label class="form-label">Recipient Address</label>
            <input type="text" id="send-to-address" class="form-control" placeholder="0x..." />
          </div>

          <div class="form-group">
            <label class="form-label">Amount</label>
            <input type="text" id="send-amount" class="form-control" placeholder="0.0" />
            <button id="btn-send-max" class="btn-link" style="font-size: 11px; margin-top: 4px;">Send Max</button>
          </div>
        </div>

        <!-- Gas Price Selector -->
        <div class="panel">
          <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Gas Price</p>

          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;">
            <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
              <input type="radio" name="send-gas-speed" value="slow" />
              <div style="flex: 1;">
                <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Slow</div>
                <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="send-gas-slow-price">-- Gwei</div>
              </div>
            </label>

            <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
              <input type="radio" name="send-gas-speed" value="normal" checked />
              <div style="flex: 1;">
                <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Normal</div>
                <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="send-gas-normal-price">-- Gwei</div>
              </div>
            </label>

            <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
              <input type="radio" name="send-gas-speed" value="fast" />
              <div style="flex: 1;">
                <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Fast</div>
                <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="send-gas-fast-price">-- Gwei</div>
              </div>
            </label>
          </div>

          <div class="form-group">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="radio" name="send-gas-speed" value="custom" id="send-gas-custom-radio" />
              <span>Custom Gas Price</span>
            </label>
            <div id="send-custom-gas-input-container" class="hidden">
              <input type="number" id="send-custom-gas-price" class="form-control" placeholder="Enter gas price in Gwei" step="0.01" min="0" />
            </div>
          </div>

          <button id="btn-refresh-send-gas" class="btn-primary btn-small" style="width: 100%; margin-top: 8px;">
            üîÑ REFRESH GAS PRICE
          </button>

          <div style="font-size: 10px; color: var(--terminal-fg-dim); margin-top: 8px;">
            <div>Estimated Gas: <span id="send-estimated-gas" style="color: var(--terminal-fg);">--</span></div>
            <div>Max Fee: <span id="send-max-fee" style="color: var(--terminal-fg);">--</span> <span id="send-max-fee-usd" style="color: var(--terminal-info);"></span></div>
          </div>
        </div>

        <!-- Advanced: Nonce Control -->
        <div class="panel">
          <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Advanced</p>

          <div style="margin-bottom: 12px;">
            <p class="text-dim" style="font-size: 10px;">Transaction Nonce: <span id="send-current-nonce" style="color: var(--terminal-fg); font-weight: bold;">--</span></p>
          </div>

          <div class="form-group">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="send-custom-nonce-checkbox" />
              <span style="font-size: 11px;">Custom Nonce (Replace Stuck TX)</span>
            </label>
            <div id="send-custom-nonce-input-container" class="hidden">
              <input type="number" id="send-custom-nonce" class="form-control" placeholder="Enter nonce" step="1" min="0" style="margin-top: 6px;" />
              <p style="font-size: 10px; color: var(--terminal-warning); margin-top: 4px; margin-bottom: 0;">
                ‚ö†Ô∏è Use same nonce as stuck transaction with higher gas price to replace it
              </p>
            </div>
          </div>
        </div>

        <div class="panel" id="send-password-panel">
          <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" id="send-password" class="form-control" placeholder="Enter password" />
          </div>
        </div>

        <!-- Progress bar for password validation -->
        <div id="send-progress-container" class="progress-container hidden">
          <div class="progress-label">Decrypting...</div>
          <div class="progress-bar-bg">
            <div id="send-progress-bar" class="progress-bar-fill"></div>
          </div>
          <div id="send-progress-text" class="progress-text">0%</div>
        </div>

        <p id="send-error" class="text-danger text-center hidden"></p>

        <div class="button-group mt-3">
          <button id="btn-confirm-send" class="btn-primary">SEND</button>
          <button id="btn-cancel-send" class="btn-secondary">CANCEL</button>
        </div>
      </div><!-- end send-form -->

      <!-- Transaction Status (shown after sending) -->
      <div id="send-status-section" class="hidden">
        <div class="panel text-center" style="border-color: var(--terminal-success);">
          <p style="font-size: 16px; font-weight: bold; margin-bottom: 8px;">‚úÖ Transaction Sent!</p>
          <p class="text-dim" style="font-size: 11px;">Hash:</p>
          <p style="font-family: var(--font-mono); font-size: 10px; word-break: break-all; margin-bottom: 12px;" id="send-status-hash">0x000...000</p>
          <button id="btn-send-status-explorer" class="btn-small">VIEW ON EXPLORER</button>
        </div>

        <div class="panel text-center" id="send-status-indicator">
          <p style="font-size: 14px; font-weight: bold;" id="send-status-message">‚è≥ Waiting for confirmation...</p>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;" id="send-status-details">This usually takes 10-30 seconds</p>
        </div>

        <!-- Pending actions (only shown while pending) -->
        <div id="send-status-pending-actions" class="button-group mt-2">
          <button id="btn-send-status-speed-up" class="btn-primary btn-small">SPEED UP</button>
          <button id="btn-send-status-cancel" class="btn-danger btn-small">CANCEL</button>
        </div>

        <div class="mt-2">
          <button id="btn-close-send-status" class="btn-small" style="width: 100%;">CLOSE</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Receive Screen -->
  <div id="screen-receive" class="hidden">
    <div class="header">
      <div class="header-title">RECEIVE</div>
      <button id="btn-back-from-receive" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <div class="panel text-center">
        <p class="text-dim mb-2" style="font-size: 11px;">Your Wallet Address</p>
        <p style="font-family: var(--font-mono); font-size: 12px; word-break: break-all; margin-bottom: 16px;" id="receive-address">
          0x0000...0000
        </p>
        <button id="btn-copy-receive-address" class="btn-primary">COPY ADDRESS</button>
      </div>

      <div class="panel text-center">
        <p class="text-dim mb-2" style="font-size: 11px;">QR Code</p>
        <canvas id="receive-qr-canvas" style="margin: 0 auto; display: block;"></canvas>
      </div>

      <div class="panel">
        <p class="text-dim text-center" style="font-size: 10px;">
          Share this address to receive <span id="receive-network-symbol">tPLS</span> on <span id="receive-network-name">PulseChain Testnet V4</span>
        </p>
      </div>
    </div>
  </div>

  <!-- Tokens Screen -->
  <div id="screen-tokens" class="hidden">
    <div class="header">
      <div class="header-title">TOKENS</div>
      <button id="btn-back-from-tokens" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <!-- Add Token Button -->
      <div class="button-group mb-2">
        <button id="btn-add-custom-token" class="btn-primary">+ ADD TOKEN</button>
      </div>

      <!-- Loading Indicator -->
      <div id="tokens-loading" class="loading-overlay">
        <div class="loading-spinner large"></div>
        <span>Loading tokens...</span>
      </div>

      <!-- Default Tokens Section -->
      <div class="panel" id="default-tokens-panel">
        <div class="panel-header">Default Tokens</div>
        <div id="default-tokens-list" style="padding: 8px;">
          <!-- Default tokens will be populated here -->
        </div>
      </div>

      <!-- Custom Tokens Section -->
      <div class="panel" id="custom-tokens-panel">
        <div class="panel-header">Custom Tokens</div>
        <div id="custom-tokens-list" style="padding: 8px;">
          <p class="text-center text-dim" style="font-size: 11px; padding: 16px;">No custom tokens added</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Token Details Screen -->
  <div id="screen-token-details" class="hidden">
    <div class="header">
      <div class="header-title" id="token-details-title">TOKEN</div>
      <button id="btn-back-from-token-details" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <!-- Token Info -->
      <div class="panel">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div id="token-details-logo-container"></div>
          <div style="flex: 1;">
            <h2 style="margin: 0; font-size: 18px;" id="token-details-name">Token Name</h2>
            <p class="text-dim" style="margin: 4px 0 0 0; font-size: 13px;" id="token-details-symbol">SYMBOL</p>
          </div>
        </div>
      </div>

      <!-- Balance & Value -->
      <div class="panel">
        <div class="panel-header">Balance</div>
        <div style="text-align: center; padding: 16px 0;">
          <p style="font-size: 24px; font-weight: bold; margin: 0;" id="token-details-balance">0.00</p>
          <p class="text-dim" style="font-size: 14px; margin: 8px 0 0 0;" id="token-details-balance-usd">$0.00</p>
        </div>
        <div style="border-top: 1px solid var(--terminal-border); padding-top: 12px; margin-top: 12px;">
          <p class="text-dim" style="font-size: 11px; margin: 0;">Current Price</p>
          <p style="font-size: 16px; font-weight: bold; margin: 4px 0 0 0;" id="token-details-price">$0.00</p>
        </div>
      </div>

      <!-- Links -->
      <div class="panel" id="token-details-links-panel">
        <div class="panel-header">Links</div>
        <div style="display: flex; flex-direction: column; gap: 8px;">
          <a id="token-details-home-link" class="hidden" target="_blank" style="color: var(--terminal-accent); text-decoration: none; font-size: 12px; display: flex; align-items: center; gap: 8px;">
            <span>üè†</span>
            <span>Homepage</span>
          </a>
          <a id="token-details-dex-link" class="hidden" target="_blank" style="color: var(--terminal-accent); text-decoration: none; font-size: 12px; display: flex; align-items: center; gap: 8px;">
            <span>üìä</span>
            <span>DexScreener</span>
          </a>
          <a id="token-details-sourcify-link" target="_blank" style="color: var(--terminal-accent); text-decoration: none; font-size: 12px; display: flex; align-items: center; gap: 8px;">
            <span>üìú</span>
            <span>View Contract (Sourcify)</span>
          </a>
          <button id="token-details-copy-address" style="background: none; border: 1px solid var(--terminal-border); color: var(--terminal-fg); cursor: pointer; font-family: var(--font-mono); font-size: 11px; padding: 8px; text-align: left; display: flex; align-items: center; gap: 8px;">
            <span>üìã</span>
            <span id="token-details-address-short">0x0000...0000</span>
          </button>
        </div>
      </div>

      <!-- Token Management (for default tokens) -->
      <div class="panel" id="token-details-management-panel">
        <div class="panel-header">Manage Token</div>
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 8px 0;">
          <span style="font-size: 13px;">Show in token list</span>
          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <input type="checkbox" id="token-details-enable-toggle" />
            <span id="token-details-enable-label" style="font-size: 12px;">Enabled</span>
          </label>
        </div>
      </div>

      <!-- Send Form (hidden after sending) -->
      <div id="token-send-form">
        <div class="panel">
          <div class="panel-header">Send Token</div>
          <div class="form-group">
            <label class="form-label">Recipient Address</label>
            <input type="text" id="token-details-recipient" class="form-control" placeholder="0x..." />
          </div>
          <div class="form-group">
            <label class="form-label">Amount</label>
            <input type="text" id="token-details-amount" class="form-control" placeholder="0.0" />
            <button id="btn-token-send-max" class="btn-link" style="font-size: 11px; margin-top: 4px;">Send Max</button>
          </div>
        </div>

        <!-- Gas Price Selector -->
        <div class="panel">
          <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Gas Price</p>

          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;">
            <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
              <input type="radio" name="token-gas-speed" value="slow" />
              <div style="flex: 1;">
                <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Slow</div>
                <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="token-gas-slow-price">-- Gwei</div>
              </div>
            </label>

            <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
              <input type="radio" name="token-gas-speed" value="normal" checked />
              <div style="flex: 1;">
                <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Normal</div>
                <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="token-gas-normal-price">-- Gwei</div>
              </div>
            </label>

            <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
              <input type="radio" name="token-gas-speed" value="fast" />
              <div style="flex: 1;">
                <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Fast</div>
                <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="token-gas-fast-price">-- Gwei</div>
              </div>
            </label>
          </div>

          <div class="form-group">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="radio" name="token-gas-speed" value="custom" id="token-gas-custom-radio" />
              <span>Custom Gas Price</span>
            </label>
            <div id="token-custom-gas-input-container" class="hidden">
              <input type="number" id="token-custom-gas-price" class="form-control" placeholder="Enter gas price in Gwei" step="0.01" min="0" />
            </div>
          </div>

          <button id="btn-refresh-token-gas" class="btn-primary btn-small" style="width: 100%; margin-top: 8px;">
            üîÑ REFRESH GAS PRICE
          </button>

          <div style="font-size: 10px; color: var(--terminal-fg-dim); margin-top: 8px;">
            <div>Estimated Gas: <span id="token-estimated-gas" style="color: var(--terminal-fg);">--</span></div>
            <div>Max Fee: <span id="token-max-fee" style="color: var(--terminal-fg);">--</span> <span id="token-max-fee-usd" style="color: var(--terminal-info);"></span></div>
          </div>
        </div>

        <!-- Advanced: Nonce Control -->
        <div class="panel">
          <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Advanced</p>

          <div style="margin-bottom: 12px;">
            <p class="text-dim" style="font-size: 10px;">Transaction Nonce: <span id="token-current-nonce" style="color: var(--terminal-fg); font-weight: bold;">--</span></p>
          </div>

          <div class="form-group">
            <label class="form-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="token-custom-nonce-checkbox" />
              <span style="font-size: 11px;">Custom Nonce (Replace Stuck TX)</span>
            </label>
            <div id="token-custom-nonce-input-container" class="hidden">
              <input type="number" id="token-custom-nonce" class="form-control" placeholder="Enter nonce" step="1" min="0" style="margin-top: 6px;" />
              <p style="font-size: 10px; color: var(--terminal-warning); margin-top: 4px; margin-bottom: 0;">
                ‚ö†Ô∏è Use same nonce as stuck transaction with higher gas price to replace it
              </p>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" id="token-details-password" class="form-control" placeholder="Enter password" />
          </div>
        </div>

        <!-- Progress bar for password validation -->
        <div id="token-send-progress-container" class="progress-container hidden">
          <div class="progress-label">Decrypting...</div>
          <div class="progress-bar-bg">
            <div id="token-send-progress-bar" class="progress-bar-fill"></div>
          </div>
          <div id="token-send-progress-text" class="progress-text">0%</div>
        </div>

        <p id="token-details-send-error" class="text-danger text-center hidden"></p>
        <div class="button-group mt-3">
          <button id="btn-token-send" class="btn-primary">SEND</button>
        </div>
      </div><!-- end token-send-form -->

      <!-- Transaction Status (shown after sending) -->
      <div id="token-send-status-section" class="hidden">
        <div class="panel text-center" style="border-color: var(--terminal-success);">
          <p style="font-size: 16px; font-weight: bold; margin-bottom: 8px;">‚úÖ Transaction Sent!</p>
          <p class="text-dim" style="font-size: 11px;">Hash:</p>
          <p style="font-family: var(--font-mono); font-size: 10px; word-break: break-all; margin-bottom: 12px;" id="token-send-status-hash">0x000...000</p>
          <button id="btn-token-send-status-explorer" class="btn-small">VIEW ON EXPLORER</button>
        </div>

        <div class="panel text-center" id="token-send-status-indicator">
          <p style="font-size: 14px; font-weight: bold;" id="token-send-status-message">‚è≥ Waiting for confirmation...</p>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;" id="token-send-status-details">This usually takes 10-30 seconds</p>
        </div>

        <!-- Pending actions (only shown while pending) -->
        <div id="token-send-status-pending-actions" class="button-group mt-2">
          <button id="btn-token-send-status-speed-up" class="btn-primary btn-small">SPEED UP</button>
          <button id="btn-token-send-status-cancel" class="btn-danger btn-small">CANCEL</button>
        </div>

        <div class="mt-2">
          <button id="btn-close-token-send-status" class="btn-small" style="width: 100%;">CLOSE</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Screen -->
  <div id="screen-settings" class="hidden">
    <div class="header">
      <div class="header-title">SETTINGS</div>
      <button id="btn-back-from-settings" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <div class="panel">
        <div class="panel-header">Security</div>
        <div class="form-group">
          <label class="form-label" for="setting-autolock">Auto-lock</label>
          <select id="setting-autolock">
            <option value="5">5 minutes</option>
            <option value="15" selected>15 minutes</option>
            <option value="30">30 minutes</option>
            <option value="60">60 minutes</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Current Network Gas Price</label>
          <p style="font-size: 12px; margin-top: 4px;">
            <span id="current-gas-price-label" class="text-dim">Loading current price...</span>
          </p>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">
            Gas price protection is automatic. Transactions are validated against 3x the current network price to allow for volatility while protecting against excessive fees.
          </p>
        </div>
        <div class="form-group" style="border-top: 1px solid var(--border-color); padding-top: 12px; margin-top: 12px;">
          <input type="checkbox" id="setting-privacy-mode" />
          <label for="setting-privacy-mode">Privacy Mode (require password to view)</label>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">
            When enabled, you must enter your password to view your dashboard, balances, and addresses.
            When disabled, the dashboard is visible immediately but password is still required for signing transactions.
          </p>
          <div id="privacy-pin-setup" class="hidden" style="margin-top: 8px; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px;">
            <p class="text-dim" style="font-size: 10px; margin-bottom: 8px;">
              <strong>Hardware wallet only:</strong> Set a privacy PIN to protect your dashboard view.
              This PIN is only used for hiding the dashboard, not for signing transactions.
            </p>
            <input type="password" id="privacy-pin-input" placeholder="Enter privacy PIN" style="margin-bottom: 8px;" />
            <input type="password" id="privacy-pin-confirm" placeholder="Confirm privacy PIN" style="margin-bottom: 8px;" />
            <button id="btn-save-privacy-pin" class="btn btn-small btn-primary">SAVE PRIVACY PIN</button>
            <p id="privacy-pin-status" class="text-dim" style="font-size: 10px; margin-top: 4px;"></p>
          </div>
        </div>
        <div class="form-group" style="border-top: 1px solid var(--border-color); padding-top: 12px; margin-top: 12px;">
          <input type="checkbox" id="setting-allow-eth-sign" />
          <label for="setting-allow-eth-sign" style="color: var(--error-color);">Allow eth_sign (‚ö†Ô∏è DANGEROUS)</label>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">
            <strong style="color: var(--error-color);">WARNING:</strong> eth_sign is a legacy method that can sign arbitrary data,
            including transactions. Malicious sites can use it to steal your funds.
            Only enable if you fully understand the risks.
          </p>
        </div>
        <button id="btn-view-seed" class="btn btn-small">VIEW SEED PHRASE</button>
        <button id="btn-export-key" class="btn btn-small">EXPORT PRIVATE KEY</button>
      </div>

      <div class="panel">
        <div class="panel-header">Wallets</div>
        <p class="text-dim mb-2" style="font-size: 11px;">
          Add, remove, or switch between wallets. All wallets use the same password.
        </p>
        <button id="btn-manage-wallets" class="btn btn-primary btn-small">MANAGE WALLETS</button>
      </div>

      <div class="panel">
        <div class="panel-header">Hardware Wallets</div>
        <p class="text-dim mb-2" style="font-size: 11px;">
          Enable support for hardware wallets. Your private keys stay on the device.
        </p>
        <div class="form-group">
          <input type="checkbox" id="setting-enable-ledger" />
          <label for="setting-enable-ledger">Enable Ledger support</label>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px; margin-left: 20px;">
            Connect Ledger Nano S/X/S Plus via USB (requires Chrome/Edge/Brave)
          </p>
        </div>
        <div class="form-group">
          <input type="checkbox" id="setting-enable-trezor" />
          <label for="setting-enable-trezor">Enable Trezor support</label>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px; margin-left: 20px;">
            Connect Trezor One/Model T via USB (coming soon)
          </p>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">Display</div>
        <div class="form-group">
          <label class="form-label" for="setting-decimals">Decimal places</label>
          <select id="setting-decimals">
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="6">6</option>
            <option value="8" selected>8</option>
            <option value="18">18</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="setting-theme">Theme</label>
          <select id="setting-theme">
            <option value="high-contrast" selected>Hacker Vision</option>
            <option value="professional">Bland Mode</option>
            <option value="amber">Retro Toaster</option>
            <option value="cga">80s Magenta</option>
            <option value="classic">Nuclear Waste</option>
            <option value="heart">Warm Fuzzies</option>
          </select>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">Network</div>
        <div class="form-group">
          <input type="checkbox" id="setting-show-testnets" checked />
          <label for="setting-show-testnets">Show test networks</label>
        </div>
        <button id="btn-network-settings" class="btn btn-primary btn-small">NETWORK SETTINGS</button>
      </div>

      <div class="panel">
        <div class="panel-header">About</div>
        <p>HeartWallet v2.0.2</p>
        <p class="text-dim mt-1" style="font-size: 11px;">
          Independent cryptocurrency wallet for PulseChain & Ethereum
        </p>
      </div>
    </div>
  </div>

  <!-- Network Settings Screen -->
  <div id="screen-network-settings" class="hidden">
    <div class="header">
      <div class="header-title">NETWORK SETTINGS</div>
      <button id="btn-back-from-network-settings" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <p class="text-dim mb-2" style="font-size: 11px;">
        Configure RPC endpoints and block explorer URLs for each network.
      </p>

      <!-- PulseChain Testnet -->
      <div class="panel">
        <div class="panel-header">PulseChain Testnet V4</div>
        <div class="form-group">
          <label class="form-label">RPC Endpoint</label>
          <input type="text" id="rpc-pulsechainTestnet" class="form-control" value="https://rpc.v4.testnet.pulsechain.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Block Explorer Base URL</label>
          <input type="text" id="explorer-pulsechainTestnet" class="form-control" value="https://scan.v4.testnet.pulsechain.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Transaction Path Pattern</label>
          <input type="text" id="explorer-tx-pulsechainTestnet" class="form-control" value="/tx/{hash}" placeholder="/tx/{hash}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {hash} as placeholder</p>
        </div>
        <div class="form-group">
          <label class="form-label">Address Path Pattern</label>
          <input type="text" id="explorer-addr-pulsechainTestnet" class="form-control" value="/address/{address}" placeholder="/address/{address}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {address} as placeholder</p>
        </div>
      </div>

      <!-- PulseChain Mainnet -->
      <div class="panel">
        <div class="panel-header">PulseChain Mainnet</div>
        <div class="form-group">
          <label class="form-label">RPC Endpoint</label>
          <input type="text" id="rpc-pulsechain" class="form-control" value="https://rpc.pulsechain.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Block Explorer Base URL</label>
          <input type="text" id="explorer-pulsechain" class="form-control" value="https://scan.mypinata.cloud/ipfs/bafybeienxyoyrhn5tswclvd3gdjy5mtkkwmu37aqtml6onbf7xnb3o22pe/" />
        </div>
        <div class="form-group">
          <label class="form-label">Transaction Path Pattern</label>
          <input type="text" id="explorer-tx-pulsechain" class="form-control" value="#/tx/{hash}" placeholder="#/tx/{hash}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {hash} as placeholder</p>
        </div>
        <div class="form-group">
          <label class="form-label">Address Path Pattern</label>
          <input type="text" id="explorer-addr-pulsechain" class="form-control" value="#/address/{address}" placeholder="#/address/{address}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {address} as placeholder</p>
        </div>
      </div>

      <!-- Ethereum -->
      <div class="panel">
        <div class="panel-header">Ethereum Mainnet</div>
        <div class="form-group">
          <label class="form-label">RPC Endpoint</label>
          <input type="text" id="rpc-ethereum" class="form-control" value="https://eth.llamarpc.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Block Explorer Base URL</label>
          <input type="text" id="explorer-ethereum" class="form-control" value="https://etherscan.io" />
        </div>
        <div class="form-group">
          <label class="form-label">Transaction Path Pattern</label>
          <input type="text" id="explorer-tx-ethereum" class="form-control" value="/tx/{hash}" placeholder="/tx/{hash}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {hash} as placeholder</p>
        </div>
        <div class="form-group">
          <label class="form-label">Address Path Pattern</label>
          <input type="text" id="explorer-addr-ethereum" class="form-control" value="/address/{address}" placeholder="/address/{address}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {address} as placeholder</p>
        </div>
      </div>

      <!-- Sepolia -->
      <div class="panel">
        <div class="panel-header">Sepolia Testnet</div>
        <div class="form-group">
          <label class="form-label">RPC Endpoint</label>
          <input type="text" id="rpc-sepolia" class="form-control" value="https://rpc.sepolia.org" />
        </div>
        <div class="form-group">
          <label class="form-label">Block Explorer Base URL</label>
          <input type="text" id="explorer-sepolia" class="form-control" value="https://sepolia.etherscan.io" />
        </div>
        <div class="form-group">
          <label class="form-label">Transaction Path Pattern</label>
          <input type="text" id="explorer-tx-sepolia" class="form-control" value="/tx/{hash}" placeholder="/tx/{hash}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {hash} as placeholder</p>
        </div>
        <div class="form-group">
          <label class="form-label">Address Path Pattern</label>
          <input type="text" id="explorer-addr-sepolia" class="form-control" value="/address/{address}" placeholder="/address/{address}" />
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;">Use {address} as placeholder</p>
        </div>
      </div>

      <div class="button-group mt-2">
        <button id="btn-save-network-settings" class="btn-primary">SAVE SETTINGS</button>
        <button id="btn-reset-network-settings" class="btn">RESET TO DEFAULTS</button>
      </div>

      <div class="panel mt-2">
        <div class="panel-header">RPC Failover Priority</div>
        <p class="text-dim" style="font-size: 11px; margin-bottom: 8px;">
          Configure the order in which RPC endpoints are tried when one fails. Endpoints closer to your location may be faster.
        </p>
        <button id="btn-rpc-priority" class="btn btn-primary btn-small">CONFIGURE RPC PRIORITY</button>
      </div>
    </div>
  </div>

  <!-- RPC Priority Settings Screen -->
  <div id="screen-rpc-priority" class="hidden">
    <div class="header">
      <div class="header-title">RPC PRIORITY</div>
      <button id="btn-back-from-rpc-priority" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <p class="text-dim mb-2" style="font-size: 11px;">
        Drag to reorder RPC endpoints. The wallet will try them in order until one succeeds. Test speeds to find the fastest for your location.
      </p>

      <!-- Network selector for RPC priority -->
      <div class="form-group mb-2">
        <label class="form-label">Select Network</label>
        <select id="rpc-priority-network" class="form-control">
          <option value="pulsechain">PulseChain Mainnet</option>
          <option value="pulsechainTestnet">PulseChain Testnet V4</option>
          <option value="ethereum">Ethereum Mainnet</option>
          <option value="sepolia">Sepolia Testnet</option>
        </select>
      </div>

      <!-- RPC list container -->
      <div class="panel">
        <div class="panel-header">RPC Endpoints (drag to reorder)</div>
        <div id="rpc-priority-list" class="rpc-priority-list">
          <!-- RPC items will be populated by JavaScript -->
        </div>
      </div>

      <!-- Test speeds button -->
      <div class="button-group mt-2">
        <button id="btn-test-rpc-speeds" class="btn">TEST SPEEDS</button>
      </div>

      <!-- Speed test results -->
      <div id="rpc-speed-results" class="panel mt-2 hidden">
        <div class="panel-header">Speed Test Results</div>
        <div id="rpc-speed-results-content"></div>
      </div>

      <!-- Add custom RPC -->
      <div class="panel mt-2">
        <div class="panel-header">Add Custom RPC</div>
        <div class="form-group">
          <input type="text" id="custom-rpc-url" class="form-control" placeholder="https://your-rpc-endpoint.com" />
        </div>
        <button id="btn-add-custom-rpc" class="btn btn-small">ADD ENDPOINT</button>
      </div>

      <div class="button-group mt-2">
        <button id="btn-save-rpc-priority" class="btn-primary">SAVE PRIORITY ORDER</button>
        <button id="btn-reset-rpc-priority" class="btn">RESET TO DEFAULTS</button>
      </div>
    </div>
  </div>

  <!-- Connection Approval Screen -->
  <div id="screen-connection-approval" class="hidden">
    <div class="container">
      <div class="text-center mb-3">
        <h1>Connection Request</h1>
      </div>

      <div class="panel" style="border-color: var(--terminal-warning);">
        <p class="text-center mb-2" style="font-size: 13px;">
          <strong id="connection-site-origin">website.com</strong>
        </p>
        <p class="text-center text-dim" style="font-size: 11px;">
          wants to connect to your wallet
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-2" style="font-size: 11px;">
          This site will be able to:
        </p>
        <ul style="list-style: none; padding-left: 0; font-size: 11px; line-height: 1.8;">
          <li>‚úì View your wallet address</li>
          <li>‚úì Request transaction approval</li>
          <li>‚úì Request message signatures</li>
        </ul>
        <p class="text-warning mt-2" style="font-size: 10px;">
          ‚ö†Ô∏è Only connect to sites you trust
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-1" style="font-size: 11px;">Active Wallet:</p>
        <p style="font-family: var(--font-mono); font-size: 12px; word-break: break-all;" id="connection-wallet-address">
          0x0000...0000
        </p>
      </div>

      <div class="button-group mt-3">
        <button id="btn-approve-connection" class="btn-primary">CONNECT</button>
        <button id="btn-reject-connection" class="btn-danger">CANCEL</button>
      </div>
    </div>
  </div>

  <!-- Transaction Approval Screen -->
  <div id="screen-transaction-approval" class="hidden">
    <div class="container">
      <div class="text-center mb-3">
        <h1>Transaction Request</h1>
      </div>

      <!-- Approval Form (hidden after approval) -->
      <div id="tx-approval-form">
        <div class="panel" style="border-color: var(--terminal-warning);">
          <p class="text-center mb-2" style="font-size: 13px;">
            <strong id="tx-site-origin">website.com</strong>
          </p>
          <p class="text-center text-dim" style="font-size: 11px;">
            wants to send a transaction
          </p>
        </div>

        <!-- Contract & Function Information -->
        <div id="tx-contract-info" class="panel hidden" style="border-color: var(--terminal-success);">
          <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
            <div style="flex: 1;">
              <p class="text-dim mb-1" style="font-size: 10px;">INTERACTING WITH CONTRACT</p>
              <p style="font-family: var(--font-mono); font-size: 10px; word-break: break-all; margin-bottom: 6px;" id="tx-contract-address">
                0x0000...0000
              </p>
              <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                <span id="tx-verified-badge" class="hidden" style="display: inline-block; font-size: 9px; padding: 2px 6px; border-radius: 3px; background: var(--terminal-success); color: var(--terminal-bg);">
                  ‚úì VERIFIED
                </span>
                <span id="tx-unverified-badge" class="hidden" style="display: inline-block; font-size: 9px; padding: 2px 6px; border-radius: 3px; background: var(--terminal-warning); color: var(--terminal-bg);">
                  ‚ö†Ô∏è UNVERIFIED
                </span>
              </div>
            </div>
            <a id="tx-contract-link" href="#" target="_blank" class="btn-small" style="font-size: 9px; padding: 4px 8px; white-space: nowrap;">
              VIEW CONTRACT ‚Üí
            </a>
          </div>

          <div style="border-top: 1px solid var(--terminal-border); padding-top: 12px;">
            <p class="text-dim mb-1" style="font-size: 10px;">FUNCTION CALL</p>
            <p style="font-size: 13px; font-weight: bold; margin-bottom: 4px;" id="tx-function-name">
              Unknown Function
            </p>
            <p class="text-dim" style="font-size: 10px;" id="tx-function-description">
              Contract interaction
            </p>
          </div>

          <!-- Parameters -->
          <div id="tx-params-section" class="hidden" style="border-top: 1px solid var(--terminal-border); padding-top: 12px; margin-top: 12px;">
            <p class="text-dim mb-2" style="font-size: 10px;">PARAMETERS</p>
            <div id="tx-params-list" style="max-height: 200px; overflow-y: auto;">
              <!-- Parameters will be populated here -->
            </div>
          </div>
        </div>

        <!-- Basic Transaction Info -->
        <div class="panel">
          <p class="text-dim mb-1" style="font-size: 11px;">From:</p>
          <p style="font-family: var(--font-mono); font-size: 11px; word-break: break-all;" id="tx-from-address">
            0x0000...0000
          </p>

          <p class="text-dim mb-1 mt-2" style="font-size: 11px;">To:</p>
          <p style="font-family: var(--font-mono); font-size: 11px; word-break: break-all;" id="tx-to-address">
            0x0000...0000
          </p>

          <p class="text-dim mb-1 mt-2" style="font-size: 11px;">Value:</p>
          <p style="font-size: 13px;" id="tx-value">0 tPLS</p>

          <!-- Raw data section (collapsible for advanced users) -->
          <div id="tx-data-section" class="mt-2 hidden">
            <details style="margin-top: 12px;">
              <summary style="cursor: pointer; font-size: 10px; color: var(--terminal-dim); user-select: none;">Advanced: View Raw Data</summary>
              <div style="margin-top: 8px; padding: 8px; background: var(--terminal-bg); border: 1px solid var(--terminal-border); border-radius: 4px;">
                <p style="font-family: var(--font-mono); font-size: 9px; word-break: break-all; max-height: 120px; overflow-y: auto; margin: 0;" id="tx-data">
                  0x
                </p>
              </div>
            </details>
          </div>
        </div>

      <!-- Gas Price Selector -->
      <div class="panel">
        <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Gas Price</p>

        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;">
          <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
            <input type="radio" name="gas-speed" value="slow" />
            <div style="flex: 1;">
              <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Slow</div>
              <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="gas-slow-price">-- Gwei</div>
            </div>
          </label>

          <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
            <input type="radio" name="gas-speed" value="normal" checked />
            <div style="flex: 1;">
              <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Normal</div>
              <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="gas-normal-price">-- Gwei</div>
            </div>
          </label>

          <label class="gas-option" style="cursor: pointer; border: 1px solid var(--terminal-border); padding: 8px; display: flex; align-items: center; gap: 6px;">
            <input type="radio" name="gas-speed" value="fast" />
            <div style="flex: 1;">
              <div style="font-size: 11px; font-weight: bold; color: var(--terminal-fg);">Fast</div>
              <div style="font-size: 10px; color: var(--terminal-fg-dim);" id="gas-fast-price">-- Gwei</div>
            </div>
          </label>
        </div>

        <div class="form-group">
          <label class="form-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <input type="radio" name="gas-speed" value="custom" id="gas-custom-radio" />
            <span>Custom Gas Price</span>
          </label>
          <div id="custom-gas-input-container" class="hidden">
            <input type="number" id="tx-custom-gas-price" class="form-control" placeholder="Enter gas price in Gwei" step="0.01" min="0" />
          </div>
        </div>

        <button id="btn-refresh-approval-gas" class="btn-primary btn-small" style="width: 100%; margin-top: 8px;">
          üîÑ REFRESH GAS PRICE
        </button>

        <div style="font-size: 10px; color: var(--terminal-fg-dim); margin-top: 8px;">
          <div>Estimated Gas: <span id="tx-estimated-gas" style="color: var(--terminal-fg);">--</span></div>
          <div>Max Fee: <span id="tx-max-fee" style="color: var(--terminal-fg);">--</span> <span id="tx-max-fee-usd" style="color: var(--terminal-info);"></span></div>
        </div>
      </div>

      <!-- Advanced: Nonce Control -->
      <div class="panel">
        <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Advanced</p>

        <div style="margin-bottom: 12px;">
          <p class="text-dim" style="font-size: 10px;">Transaction Nonce: <span id="tx-current-nonce" style="color: var(--terminal-fg); font-weight: bold;">--</span></p>
        </div>

        <div class="form-group">
          <label class="form-label" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <input type="checkbox" id="tx-custom-nonce-checkbox" />
            <span style="font-size: 11px;">Custom Nonce (Replace Stuck TX)</span>
          </label>
          <div id="custom-nonce-input-container" class="hidden">
            <input type="number" id="tx-custom-nonce" class="form-control" placeholder="Enter nonce" step="1" min="0" style="margin-top: 6px;" />
            <p style="font-size: 10px; color: var(--terminal-warning); margin-top: 4px; margin-bottom: 0;">
              ‚ö†Ô∏è Use same nonce as stuck transaction with higher gas price to replace it
            </p>
          </div>
        </div>
      </div>

      <div class="panel" style="border: 2px solid var(--terminal-warning); background: var(--terminal-bg-secondary);">
        <div class="form-group" id="tx-password-group">
          <label class="form-label" style="color: var(--terminal-warning); font-weight: bold;">‚ö†Ô∏è Password Required</label>
          <input type="password" id="tx-password" class="form-control" placeholder="Enter password to confirm transaction" style="border: 2px solid var(--terminal-warning); background: var(--terminal-bg);" />
          <p style="font-size: 10px; color: var(--terminal-warning); margin-top: 6px; margin-bottom: 0;">
            Enter your wallet password to approve this transaction
          </p>
        </div>
      </div>

      <!-- Progress bar for password validation -->
      <div id="tx-approval-progress-container" class="progress-container hidden">
        <div class="progress-label">Decrypting...</div>
        <div class="progress-bar-bg">
          <div id="tx-approval-progress-bar" class="progress-bar-fill"></div>
        </div>
        <div id="tx-approval-progress-text" class="progress-text">0%</div>
      </div>

      <p id="tx-error" class="text-danger text-center hidden"></p>

      <div class="button-group mt-3" id="tx-approval-buttons">
        <button id="btn-approve-transaction" class="btn-primary">CONFIRM</button>
        <button id="btn-reject-transaction" class="btn-danger">REJECT</button>
      </div>
      </div><!-- end tx-approval-form -->

      <!-- Transaction Status (shown after approval) -->
      <div id="tx-status-section" class="hidden">
        <div class="panel text-center" style="border-color: var(--terminal-success);">
          <p style="font-size: 16px; font-weight: bold; margin-bottom: 8px;">‚úÖ Transaction Sent!</p>
          <p class="text-dim" style="font-size: 11px;">Hash:</p>
          <p style="font-family: var(--font-mono); font-size: 10px; word-break: break-all; margin-bottom: 12px;" id="tx-status-hash">0x000...000</p>
          <button id="btn-tx-status-explorer" class="btn-small">VIEW ON EXPLORER</button>
        </div>

        <div class="panel text-center" id="tx-status-indicator">
          <p style="font-size: 14px; font-weight: bold;" id="tx-status-message">‚è≥ Waiting for confirmation...</p>
          <p class="text-dim" style="font-size: 10px; margin-top: 4px;" id="tx-status-details">This usually takes 10-30 seconds</p>
        </div>

        <!-- Pending actions (only shown while pending) -->
        <div id="tx-status-pending-actions" class="button-group mt-2">
          <button id="btn-tx-status-speed-up" class="btn-primary btn-small">SPEED UP</button>
          <button id="btn-tx-status-cancel" class="btn-danger btn-small">CANCEL</button>
        </div>

        <div class="mt-2">
          <button id="btn-close-tx-status" class="btn-small" style="width: 100%;">CLOSE</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Message Signing Approval Screen (personal_sign) -->
  <div id="screen-sign-message" class="hidden">
    <div class="container">
      <div class="text-center mb-3">
        <h1>Sign Message</h1>
      </div>

      <div class="panel" style="border-color: var(--terminal-warning);">
        <p class="text-center mb-2" style="font-size: 13px;">
          <strong id="sign-site-origin">website.com</strong>
        </p>
        <p class="text-center text-dim" style="font-size: 11px;">
          wants you to sign a message
        </p>
      </div>

      <div class="panel" style="border-color: var(--terminal-error);">
        <p style="font-size: 11px; color: var(--terminal-error); margin-bottom: 8px;">
          ‚ö†Ô∏è <strong>WARNING:</strong> Only sign messages from sites you trust!
        </p>
        <p style="font-size: 10px; color: var(--terminal-fg-dim);">
          Signing a message proves you own this address. Malicious sites can use this for phishing.
        </p>
      </div>

      <!-- DANGER WARNING for eth_sign (hidden by default) -->
      <div id="eth-sign-danger-warning" class="panel hidden" style="border: 2px solid var(--terminal-error); background: rgba(255, 0, 0, 0.1);">
        <p style="font-size: 13px; color: var(--terminal-error); margin-bottom: 8px; font-weight: bold;">
          üö® EXTREME DANGER: eth_sign Request
        </p>
        <p style="font-size: 11px; color: var(--terminal-error); margin-bottom: 8px;">
          This site is using the <strong>DEPRECATED eth_sign</strong> method!
        </p>
        <p style="font-size: 10px; color: var(--terminal-fg); line-height: 1.4;">
          ‚Ä¢ eth_sign can sign RAW DATA including transactions<br>
          ‚Ä¢ Malicious sites can DRAIN YOUR ENTIRE WALLET<br>
          ‚Ä¢ This can authorize unlimited token approvals<br>
          ‚Ä¢ Modern sites should use personal_sign instead
        </p>
        <p style="font-size: 11px; color: var(--terminal-error); margin-top: 8px; font-weight: bold;">
          ‚õî ONLY PROCEED IF YOU FULLY TRUST THIS SITE
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-1" style="font-size: 11px;">Account:</p>
        <p style="font-family: var(--font-mono); font-size: 11px; word-break: break-all;" id="sign-address">
          0x0000...0000
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Message:</p>
        <div style="max-height: 200px; overflow-y: auto; padding: 12px; background: var(--terminal-bg-dark); border: 1px solid var(--terminal-border); border-radius: 4px;">
          <pre id="sign-message-content" style="font-family: var(--font-mono); font-size: 10px; white-space: pre-wrap; word-break: break-word; margin: 0; color: var(--terminal-fg);">Loading...</pre>
        </div>
        <p id="sign-message-hex-warning" class="hidden" style="font-size: 10px; color: var(--terminal-warning); margin-top: 8px;">
          ‚ö†Ô∏è This appears to be hex-encoded data. Be extra careful!
        </p>
      </div>

      <div class="form-group">
        <label class="form-label" for="sign-password">Enter Password to Sign</label>
        <input type="password" id="sign-password" class="form-control" placeholder="Password" />
        <p id="sign-error" class="error-message hidden"></p>
      </div>

      <!-- Progress bar for password validation -->
      <div id="sign-progress-container" class="progress-container hidden">
        <div class="progress-label">Decrypting...</div>
        <div class="progress-bar-bg">
          <div id="sign-progress-bar" class="progress-bar-fill"></div>
        </div>
        <div id="sign-progress-text" class="progress-text">0%</div>
      </div>

      <div style="display: flex; gap: 12px;">
        <button id="btn-reject-sign" class="btn-small" style="flex: 1; background: var(--terminal-error);">
          REJECT
        </button>
        <button id="btn-approve-sign" class="btn-small" style="flex: 1;">
          SIGN MESSAGE
        </button>
      </div>
    </div>
  </div>

  <!-- Typed Data Signing Approval Screen (signTypedData) -->
  <div id="screen-sign-typed-data" class="hidden">
    <div class="container">
      <div class="text-center mb-3">
        <h1>Sign Typed Data</h1>
      </div>

      <div class="panel" style="border-color: var(--terminal-warning);">
        <p class="text-center mb-2" style="font-size: 13px;">
          <strong id="sign-typed-site-origin">website.com</strong>
        </p>
        <p class="text-center text-dim" style="font-size: 11px;">
          wants you to sign structured data
        </p>
      </div>

      <div class="panel" style="border-color: var(--terminal-info);">
        <p style="font-size: 11px; margin-bottom: 8px;">
          ‚ÑπÔ∏è <strong>EIP-712 Typed Data Signing</strong>
        </p>
        <p style="font-size: 10px; color: var(--terminal-fg-dim);">
          This is a structured message. Common uses: token permits, meta-transactions, and protocol approvals.
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-1" style="font-size: 11px;">Account:</p>
        <p style="font-family: var(--font-mono); font-size: 11px; word-break: break-all;" id="sign-typed-address">
          0x0000...0000
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Domain:</p>
        <div style="padding: 8px; background: var(--terminal-bg-dark); border: 1px solid var(--terminal-border); border-radius: 4px; margin-bottom: 12px;">
          <p style="font-size: 10px; margin: 4px 0;"><span class="text-dim">Name:</span> <span id="sign-typed-domain-name">--</span></p>
          <p style="font-size: 10px; margin: 4px 0;"><span class="text-dim">Chain ID:</span> <span id="sign-typed-domain-chain">--</span></p>
          <p id="sign-typed-domain-contract-row" class="hidden" style="font-size: 10px; margin: 4px 0;">
            <span class="text-dim">Contract:</span> <span id="sign-typed-domain-contract" style="font-family: var(--font-mono);">--</span>
          </p>
        </div>

        <p class="text-dim mb-2" style="font-size: 11px; font-weight: bold;">Message Data:</p>
        <div style="max-height: 250px; overflow-y: auto; padding: 12px; background: var(--terminal-bg-dark); border: 1px solid var(--terminal-border); border-radius: 4px;">
          <pre id="sign-typed-message-content" style="font-family: var(--font-mono); font-size: 9px; white-space: pre-wrap; word-break: break-word; margin: 0; color: var(--terminal-fg);">Loading...</pre>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="sign-typed-password">Enter Password to Sign</label>
        <input type="password" id="sign-typed-password" class="form-control" placeholder="Password" />
        <p id="sign-typed-error" class="error-message hidden"></p>
      </div>

      <!-- Progress bar for password validation -->
      <div id="sign-typed-progress-container" class="progress-container hidden">
        <div class="progress-label">Decrypting...</div>
        <div class="progress-bar-bg">
          <div id="sign-typed-progress-bar" class="progress-bar-fill"></div>
        </div>
        <div id="sign-typed-progress-text" class="progress-text">0%</div>
      </div>

      <div style="display: flex; gap: 12px;">
        <button id="btn-reject-sign-typed" class="btn-small" style="flex: 1; background: var(--terminal-error);">
          REJECT
        </button>
        <button id="btn-approve-sign-typed" class="btn-small" style="flex: 1;">
          SIGN DATA
        </button>
      </div>
    </div>
  </div>

  <!-- Add Token Approval Screen -->
  <div id="screen-add-token" class="hidden">
    <div class="container">
      <div class="text-center mb-3">
        <h1>Add Token</h1>
      </div>

      <div class="panel" style="border-color: var(--terminal-warning);">
        <p class="text-center mb-2" style="font-size: 13px;">
          <strong id="token-site-origin">website.com</strong>
        </p>
        <p class="text-center text-dim" style="font-size: 11px;">
          wants to add a token to your wallet
        </p>
      </div>

      <div class="panel">
        <p class="text-dim mb-1" style="font-size: 11px;">Token Symbol:</p>
        <p style="font-size: 16px; font-weight: bold;" id="token-symbol">SYMBOL</p>

        <p class="text-dim mb-1 mt-2" style="font-size: 11px;">Contract Address:</p>
        <p style="font-family: var(--font-mono); font-size: 11px; word-break: break-all;" id="token-address">
          0x0000...0000
        </p>

        <p class="text-dim mb-1 mt-2" style="font-size: 11px;">Decimals:</p>
        <p style="font-size: 13px;" id="token-decimals">18</p>

        <div id="token-image-section" class="mt-2 text-center hidden">
          <img id="token-image" src="" alt="Token logo" style="max-width: 80px; max-height: 80px; border-radius: 8px;" />
        </div>
      </div>

      <div class="panel" style="border-color: var(--terminal-warning); background: var(--terminal-bg-secondary);">
        <p style="font-size: 11px; color: var(--terminal-warning); line-height: 1.5;">
          ‚ö†Ô∏è <strong>Warning:</strong> Only add tokens you trust. Malicious tokens can steal your funds.
        </p>
        <p style="font-size: 10px; color: var(--terminal-fg-dim); margin-top: 8px; margin-bottom: 0;">
          Always verify the contract address on a blockchain explorer before adding.
        </p>
      </div>

      <p id="token-error" class="text-danger text-center hidden"></p>

      <div class="button-group mt-3">
        <button id="btn-approve-token" class="btn-primary">ADD TOKEN</button>
        <button id="btn-reject-token" class="btn-danger">REJECT</button>
      </div>
    </div>
  </div>

  <!-- Transaction History Screen -->
  <div id="screen-tx-history" class="hidden">
    <div class="header">
      <div class="header-title">TRANSACTION HISTORY</div>
      <button id="btn-back-from-tx-history" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <!-- Filter Tabs -->
      <div style="display: flex; gap: 8px; margin-bottom: 16px;">
        <button id="filter-all-txs" class="btn-small" style="flex: 1;">ALL</button>
        <button id="filter-pending-txs" class="btn-small" style="flex: 1;">PENDING</button>
        <button id="filter-confirmed-txs" class="btn-small" style="flex: 1;">CONFIRMED</button>
      </div>

      <!-- Transaction List -->
      <div id="tx-history-list" style="min-height: 200px;">
        <p class="text-center text-dim">No transactions</p>
      </div>

      <!-- Clear History Button -->
      <div class="mt-3">
        <button id="btn-clear-tx-history" class="btn-danger btn-small">CLEAR HISTORY</button>
      </div>
    </div>
  </div>

  <!-- Transaction Details Screen -->
  <div id="screen-tx-details" class="hidden">
    <div class="header">
      <div class="header-title">TRANSACTION DETAILS</div>
      <button id="btn-back-from-tx-details" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <!-- Status Badge -->
      <div id="tx-status-badge" class="panel text-center mb-2" style="padding: 12px;">
        <p style="font-size: 16px; font-weight: bold;" id="tx-status-text">‚è≥ PENDING</p>
      </div>

      <!-- Refresh Status Button -->
      <button id="btn-refresh-tx-status" class="btn-primary btn-small" style="width: 100%; margin-bottom: 8px;">
        üîÑ REFRESH STATUS FROM BLOCKCHAIN
      </button>

      <!-- Rebroadcast Button (for pending transactions) -->
      <button id="btn-rebroadcast-tx" class="btn-secondary btn-small hidden" style="width: 100%; margin-bottom: 12px;">
        üì° REBROADCAST TO ALL RPCS
      </button>

      <!-- Transaction Info -->
      <div class="panel">
        <p class="text-dim mb-1">Transaction Hash:</p>
        <p style="font-family: var(--font-mono); font-size: 10px; word-break: break-all;" id="tx-detail-hash">0x000...000</p>
        <button id="btn-copy-tx-hash" class="btn-small mt-1">COPY HASH</button>
        <button id="btn-view-explorer" class="btn-small mt-1">VIEW ON EXPLORER</button>

        <p class="text-dim mb-1 mt-2">From:</p>
        <p style="font-family: var(--font-mono); font-size: 10px;" id="tx-detail-from">0x000...000</p>

        <p class="text-dim mb-1 mt-2">To:</p>
        <p style="font-family: var(--font-mono); font-size: 10px;" id="tx-detail-to">0x000...000</p>

        <p class="text-dim mb-1 mt-2">Value:</p>
        <p id="tx-detail-value">0 PLS</p>

        <p class="text-dim mb-1 mt-2">Nonce:</p>
        <p id="tx-detail-nonce">0</p>

        <p class="text-dim mb-1 mt-2">Gas Price:</p>
        <p id="tx-detail-gas-price">0 Gwei</p>

        <p class="text-dim mb-1 mt-2">Network:</p>
        <p id="tx-detail-network">PulseChain</p>

        <p class="text-dim mb-1 mt-2">Timestamp:</p>
        <p id="tx-detail-timestamp">--</p>

        <div id="tx-detail-block-section" class="hidden">
          <p class="text-dim mb-1 mt-2">Block Number:</p>
          <p id="tx-detail-block">--</p>
        </div>
      </div>

      <!-- Pending TX Actions -->
      <div id="tx-pending-actions" class="hidden mt-3">
        <div class="panel" style="border-color: var(--terminal-warning);">
          <p style="color: var(--terminal-warning);">‚ö†Ô∏è <strong>Taking too long?</strong></p>
          <p style="font-size: 10px;">Speed up or cancel this transaction with a higher gas price.</p>
        </div>

        <div class="button-group mt-2">
          <button id="btn-speed-up-tx" class="btn-primary">SPEED UP</button>
          <button id="btn-cancel-tx" class="btn-danger">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Manage Wallets Screen -->
  <div id="screen-manage-wallets" class="hidden">
    <div class="header">
      <div class="header-title">MANAGE WALLETS</div>
      <button id="btn-back-from-manage-wallets" class="header-btn">‚Üê</button>
    </div>
    <div class="container">
      <div class="button-group">
        <button id="btn-create-new-wallet-multi" class="btn-primary">+ CREATE NEW</button>
        <button id="btn-import-wallet-multi" class="btn-primary">+ IMPORT</button>
        <button id="btn-connect-ledger-multi" class="btn-primary">+ LEDGER</button>
      </div>

      <div class="mt-3">
        <div class="panel-header">YOUR WALLETS (<span id="wallet-count">0</span>)</div>
        <div id="wallet-list" class="mt-2">
          <!-- Wallet list will be populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <!-- Password Prompt Modal -->
  <div id="modal-password-prompt" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="password-prompt-title">Enter Password</div>
        <button class="modal-close" id="btn-close-password-prompt">√ó</button>
      </div>
      <div class="modal-body">
        <p class="text-dim mb-2" id="password-prompt-message">Enter your password to continue</p>
        <div class="form-group">
          <input type="password" id="password-prompt-input" placeholder="Enter password" autofocus />
        </div>
        <div id="password-prompt-error" class="form-error hidden"></div>

        <!-- Progress bar for wallet creation/import -->
        <div id="password-prompt-progress-container" class="progress-container hidden">
          <div class="progress-label">Encrypting wallet...</div>
          <div class="progress-bar-bg">
            <div id="password-prompt-progress-bar" class="progress-bar-fill"></div>
          </div>
          <div id="password-prompt-progress-text" class="progress-text">0%</div>
        </div>

        <div class="button-group mt-2" id="password-prompt-buttons">
          <button id="btn-password-prompt-confirm" class="btn-primary">CONFIRM</button>
          <button id="btn-password-prompt-cancel">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Speed Up Transaction Modal -->
  <div id="modal-speed-up-tx" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Speed Up Transaction</div>
        <button class="modal-close" id="btn-close-speed-up-modal">√ó</button>
      </div>
      <div class="modal-body">
        <p class="text-dim mb-2" style="font-size: 11px;">Your transaction is stuck because the gas price is too low. Review current network conditions:</p>

        <!-- Gas Price Comparison Panel -->
        <div class="panel" style="background: var(--terminal-bg); border: 1px solid var(--terminal-primary);">
          <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">ORIGINAL GAS:</span>
            <span id="speed-up-original-gas" style="font-size: 11px; color: var(--terminal-danger);">-- Gwei</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">CURRENT NETWORK:</span>
            <span id="speed-up-current-gas" style="font-size: 11px; font-weight: bold;">-- Gwei</span>
          </div>
          <div style="display: flex; justify-content: space-between; border-top: 1px solid var(--terminal-dim); padding-top: 8px; margin-top: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">RECOMMENDED:</span>
            <span id="speed-up-recommended-gas" style="font-size: 11px; color: var(--terminal-success); font-weight: bold;">-- Gwei</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-top: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">EST. COST:</span>
            <span id="speed-up-estimated-cost" style="font-size: 11px; color: var(--terminal-info);">--</span>
          </div>
          <div id="speed-up-comparison-message" class="mt-2" style="font-size: 9px; color: var(--terminal-warning); text-align: center;">
            <!-- Comparison message will appear here -->
          </div>
        </div>

        <!-- Refresh Button -->
        <button id="btn-refresh-gas-price" class="btn-primary btn-small mt-2" style="width: 100%;">
          üîÑ REFRESH GAS PRICE
        </button>

        <!-- Custom Gas Price Input (Advanced) -->
        <div class="mt-3">
          <details>
            <summary style="cursor: pointer; font-size: 10px; color: var(--terminal-dim); user-select: none;">Advanced: Set Custom Gas Price</summary>
            <div class="form-group mt-2">
              <label style="font-size: 10px;">Custom Gas Price (Gwei):</label>
              <input type="number" id="speed-up-custom-gas" placeholder="e.g., 150" step="0.1" min="0" />
              <p style="font-size: 9px; color: var(--terminal-dim); margin-top: 4px;">Leave empty to use recommended price</p>
            </div>
          </details>
        </div>

        <!-- Action Buttons -->
        <div class="button-group mt-3">
          <button id="btn-confirm-speed-up" class="btn-primary">CONFIRM SPEED UP</button>
          <button id="btn-cancel-speed-up">CANCEL</button>
        </div>

        <!-- Loading State -->
        <div id="speed-up-loading" class="hidden mt-2" style="text-align: center;">
          <p style="font-size: 10px; color: var(--terminal-dim);">‚è≥ Loading gas prices...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Cancel Transaction Modal -->
  <div id="modal-cancel-tx" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">Cancel Transaction</div>
        <button class="modal-close" id="btn-close-cancel-modal">√ó</button>
      </div>
      <div class="modal-body">
        <p class="text-dim mb-2" style="font-size: 11px;">Cancel this transaction by sending a 0-value transaction to yourself with the same nonce. Review current network conditions:</p>

        <!-- Gas Price Comparison Panel -->
        <div class="panel" style="background: var(--terminal-bg); border: 1px solid var(--terminal-danger);">
          <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">ORIGINAL GAS:</span>
            <span id="cancel-original-gas" style="font-size: 11px; color: var(--terminal-danger);">-- Gwei</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">CURRENT NETWORK:</span>
            <span id="cancel-current-gas" style="font-size: 11px; font-weight: bold;">-- Gwei</span>
          </div>
          <div style="display: flex; justify-content: space-between; border-top: 1px solid var(--terminal-dim); padding-top: 8px; margin-top: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">RECOMMENDED:</span>
            <span id="cancel-recommended-gas" style="font-size: 11px; color: var(--terminal-success); font-weight: bold;">-- Gwei</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-top: 8px;">
            <span style="font-size: 10px; color: var(--terminal-dim);">EST. COST:</span>
            <span id="cancel-estimated-cost" style="font-size: 11px; color: var(--terminal-info);">--</span>
          </div>
          <div id="cancel-comparison-message" class="mt-2" style="font-size: 9px; color: var(--terminal-warning); text-align: center;">
            <!-- Comparison message will appear here -->
          </div>
        </div>

        <!-- Refresh Button -->
        <button id="btn-refresh-cancel-gas-price" class="btn-primary btn-small mt-2" style="width: 100%;">
          üîÑ REFRESH GAS PRICE
        </button>

        <!-- Custom Gas Price Input (Advanced) -->
        <div class="mt-3">
          <details>
            <summary style="cursor: pointer; font-size: 10px; color: var(--terminal-dim); user-select: none;">Advanced: Set Custom Gas Price</summary>
            <div class="form-group mt-2">
              <label style="font-size: 10px;">Custom Gas Price (Gwei):</label>
              <input type="number" id="cancel-custom-gas" placeholder="e.g., 150" step="0.1" min="0" />
              <p style="font-size: 9px; color: var(--terminal-dim); margin-top: 4px;">Leave empty to use recommended price</p>
            </div>
          </details>
        </div>

        <!-- Action Buttons -->
        <div class="button-group mt-3">
          <button id="btn-confirm-cancel" class="btn-danger">CONFIRM CANCEL</button>
          <button id="btn-close-cancel">CLOSE</button>
        </div>

        <!-- Loading State -->
        <div id="cancel-loading" class="hidden mt-2" style="text-align: center;">
          <p style="font-size: 10px; color: var(--terminal-dim);">‚è≥ Loading gas prices...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Display Secret Modal (for seed phrase / private key) -->
  <div id="modal-display-secret" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="display-secret-title">Your Secret</div>
        <button class="modal-close" id="btn-close-display-secret">√ó</button>
      </div>
      <div class="modal-body">
        <p class="text-warning mb-2">‚ö†Ô∏è Never share this with anyone!</p>
        <div class="panel" style="background: var(--terminal-bg); border: 2px solid var(--terminal-warning);">
          <div id="display-secret-content" style="word-break: break-all; user-select: text; cursor: text; font-family: var(--font-mono); line-height: 1.6;">
            <!-- Secret will be displayed here -->
          </div>
        </div>
        <div class="button-group mt-2">
          <button id="btn-copy-secret" class="btn-primary">COPY TO CLIPBOARD</button>
          <button id="btn-close-display-secret-btn">CLOSE</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Wallet Modal -->
  <div id="modal-add-wallet" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">ADD NEW WALLET</div>
        <button class="modal-close" id="btn-close-add-wallet">√ó</button>
      </div>
      <div class="modal-body">
        <p class="text-dim mb-3">Choose how to add a wallet:</p>

        <div class="panel mb-2" style="cursor: pointer; transition: all 0.2s;" id="add-wallet-option-create">
          <div style="font-weight: bold; margin-bottom: 6px;">üé≤ CREATE NEW WALLET</div>
          <div class="text-dim" style="font-size: 11px;">Generate a new wallet with a new recovery phrase</div>
        </div>

        <div class="panel mb-2" style="cursor: pointer; transition: all 0.2s;" id="add-wallet-option-mnemonic">
          <div style="font-weight: bold; margin-bottom: 6px;">üìù IMPORT FROM SEED PHRASE</div>
          <div class="text-dim" style="font-size: 11px;">Restore wallet using 12-word recovery phrase</div>
        </div>

        <div class="panel mb-2" style="cursor: pointer; transition: all 0.2s;" id="add-wallet-option-privatekey">
          <div style="font-weight: bold; margin-bottom: 6px;">üîë IMPORT FROM PRIVATE KEY</div>
          <div class="text-dim" style="font-size: 11px;">Import wallet using private key string</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Create New Wallet (Multi) Modal -->
  <div id="modal-create-wallet-multi" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">CREATE NEW WALLET</div>
        <button class="modal-close" id="btn-close-create-wallet-multi">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Wallet Nickname</label>
          <input type="text" id="input-new-wallet-nickname" placeholder="e.g., Trading Wallet" />
        </div>

        <div class="form-group">
          <label class="form-label">Your Secret Recovery Phrase</label>
          <div class="panel" style="background: var(--terminal-bg); border: 2px solid var(--terminal-warning);">
            <div id="multi-mnemonic-display" style="word-break: break-all; user-select: text; font-family: var(--font-mono); line-height: 1.6;">
              Generating...
            </div>
          </div>
        </div>

        <div class="panel" style="border-color: var(--terminal-warning); background: var(--terminal-bg);">
          <p class="text-warning" style="font-size: 11px; margin-bottom: 12px; line-height: 1.4;">
            ‚ö†Ô∏è Write down your recovery phrase on paper and store it safely. This is the ONLY way to recover your wallet if you forget your password or lose access. Never share it with anyone!
          </p>

          <label class="form-label" style="color: var(--terminal-warning); font-weight: bold; margin-bottom: 8px;">Verify your backup:</label>
          <p class="form-hint" style="margin-bottom: 8px;">To confirm you've written it down correctly, please enter these words from your recovery phrase:</p>

          <div style="display: grid; gap: 8px;">
            <div>
              <label class="form-label" style="font-size: 11px;">Word #<span id="verify-word-1-num-multi">1</span>:</label>
              <input type="text" id="verify-word-1-multi" class="form-control" placeholder="Enter word" autocomplete="off" style="font-size: 11px;" />
            </div>
            <div>
              <label class="form-label" style="font-size: 11px;">Word #<span id="verify-word-2-num-multi">6</span>:</label>
              <input type="text" id="verify-word-2-multi" class="form-control" placeholder="Enter word" autocomplete="off" style="font-size: 11px;" />
            </div>
            <div>
              <label class="form-label" style="font-size: 11px;">Word #<span id="verify-word-3-num-multi">12</span>:</label>
              <input type="text" id="verify-word-3-multi" class="form-control" placeholder="Enter word" autocomplete="off" style="font-size: 11px;" />
            </div>
          </div>
          <p id="verification-error-multi" class="text-danger hidden" style="font-size: 11px; margin-top: 8px;"></p>

          <div id="create-multi-progress-container" class="progress-container hidden">
            <div class="progress-label">Creating wallet...</div>
            <div class="progress-bar-bg">
              <div id="create-multi-progress-bar" class="progress-bar-fill"></div>
            </div>
            <div id="create-multi-progress-text" class="progress-text">0%</div>
          </div>
        </div>

        <div class="button-group mt-2">
          <button id="btn-confirm-create-wallet-multi" class="btn-primary">CREATE WALLET</button>
          <button id="btn-cancel-create-wallet-multi">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Import from Seed (Multi) Modal -->
  <div id="modal-import-seed-multi" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">IMPORT FROM SEED PHRASE</div>
        <button class="modal-close" id="btn-close-import-seed-multi">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Wallet Nickname</label>
          <input type="text" id="input-import-seed-nickname" placeholder="e.g., Cold Storage" />
        </div>

        <div class="form-group">
          <label class="form-label">12-Word Recovery Phrase</label>
          <textarea id="input-import-seed-phrase" rows="3" placeholder="Enter your 12-word seed phrase"></textarea>
        </div>

        <div id="import-seed-error-multi" class="form-error hidden"></div>

        <div id="import-seed-multi-progress-container" class="progress-container hidden">
          <div class="progress-label">Importing wallet...</div>
          <div class="progress-bar-bg">
            <div id="import-seed-multi-progress-bar" class="progress-bar-fill"></div>
          </div>
          <div id="import-seed-multi-progress-text" class="progress-text">0%</div>
        </div>

        <div class="button-group mt-2">
          <button id="btn-confirm-import-seed-multi" class="btn-primary">IMPORT WALLET</button>
          <button id="btn-cancel-import-seed-multi">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Import from Private Key (Multi) Modal -->
  <div id="modal-import-key-multi" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">IMPORT FROM PRIVATE KEY</div>
        <button class="modal-close" id="btn-close-import-key-multi">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Wallet Nickname</label>
          <input type="text" id="input-import-key-nickname" placeholder="e.g., Hardware Backup" />
        </div>

        <div class="form-group">
          <label class="form-label">Private Key</label>
          <input type="password" id="input-import-private-key" placeholder="0x..." />
        </div>

        <div id="import-key-error-multi" class="form-error hidden"></div>

        <div id="import-key-multi-progress-container" class="progress-container hidden">
          <div class="progress-label">Importing wallet...</div>
          <div class="progress-bar-bg">
            <div id="import-key-multi-progress-bar" class="progress-bar-fill"></div>
          </div>
          <div id="import-key-multi-progress-text" class="progress-text">0%</div>
        </div>

        <div class="button-group mt-2">
          <button id="btn-confirm-import-key-multi" class="btn-primary">IMPORT WALLET</button>
          <button id="btn-cancel-import-key-multi">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Custom Token Modal -->
  <div id="modal-add-token" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">ADD CUSTOM TOKEN</div>
        <button class="modal-close" id="btn-close-add-token">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Token Contract Address</label>
          <input type="text" id="input-token-address" class="form-control" placeholder="0x..." />
        </div>

        <div id="token-preview" class="panel hidden" style="margin-top: 16px;">
          <p class="text-dim mb-1" style="font-size: 11px;">Token Info:</p>
          <p style="font-size: 13px;"><strong id="token-preview-name">-</strong></p>
          <p class="text-dim" style="font-size: 11px;">Symbol: <span id="token-preview-symbol">-</span></p>
          <p class="text-dim" style="font-size: 11px;">Decimals: <span id="token-preview-decimals">-</span></p>
        </div>

        <div id="add-token-error" class="form-error hidden"></div>

        <div class="button-group mt-2">
          <button id="btn-confirm-add-token" class="btn-primary">ADD TOKEN</button>
          <button id="btn-cancel-add-token">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Rename Wallet Modal -->
  <div id="modal-rename-wallet" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">RENAME WALLET</div>
        <button class="modal-close" id="btn-close-rename-wallet">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">New Nickname</label>
          <input type="text" id="input-rename-wallet-nickname" placeholder="Enter new nickname" maxlength="30" />
        </div>

        <div id="rename-error" class="form-error hidden"></div>

        <div class="button-group mt-2">
          <button id="btn-confirm-rename-wallet" class="btn-primary">RENAME</button>
          <button id="btn-cancel-rename-wallet">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Transaction Success Modal -->
  <div id="modal-tx-success" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">Transaction Sent!</div>
        <button class="modal-close" id="btn-close-tx-success">√ó</button>
      </div>
      <div class="modal-body">
        <p class="text-center mb-3" style="color: var(--terminal-success); font-size: 16px;">‚úì Transaction Submitted</p>

        <div class="panel">
          <p class="text-dim mb-1" style="font-size: 11px;">Transaction Hash:</p>
          <p style="font-family: var(--font-mono); font-size: 11px; word-break: break-all;" id="tx-success-hash">
            0x0000...0000
          </p>
          <button id="btn-copy-tx-hash" class="btn-link" style="font-size: 11px; margin-top: 8px;">Copy Tx Hash</button>
        </div>

        <p class="text-dim text-center mt-3" style="font-size: 10px;">
          The transaction has been submitted to the network and is pending confirmation.
        </p>

        <div class="button-group mt-3">
          <button id="btn-ok-tx-success" class="btn-primary">OK</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./popup.js"></script>
</body>
</html>

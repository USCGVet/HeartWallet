const script = document.createElement("script");
script.src = chrome.runtime.getURL("inpage.js");
script.onload = function() {
  this.remove();
};
(document.head || document.documentElement).appendChild(script);
window.addEventListener("message", async (event) => {
  if (event.source !== window) return;
  if (event.data.target !== "heartwallet-contentscript") return;
  const { type, requestId, method, params } = event.data;
  if (type !== "WALLET_REQUEST") return;
  try {
    const response = await chrome.runtime.sendMessage({
      type: "WALLET_REQUEST",
      requestId,
      method,
      params,
      origin: window.location.origin
    });
    window.postMessage({
      target: "heartwallet-inpage",
      requestId,
      method,
      result: response.result,
      error: response.error
    }, window.location.origin);
  } catch (error) {
    console.error("ðŸ«€ Content script error:", error);
    if (error.message && error.message.includes("Extension context invalidated")) {
      console.warn("ðŸ«€ HeartWallet extension was reloaded. Please refresh this page to reconnect.");
    }
    window.postMessage({
      target: "heartwallet-inpage",
      requestId,
      method,
      error: {
        message: error.message || "Unknown error",
        code: -32603
      }
    }, window.location.origin);
  }
});
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.type === "ACCOUNTS_CHANGED") {
    window.postMessage({
      target: "heartwallet-inpage",
      type: "EVENT",
      event: "accountsChanged",
      data: message.accounts
    }, window.location.origin);
  } else if (message.type === "CHAIN_CHANGED") {
    window.postMessage({
      target: "heartwallet-inpage",
      type: "EVENT",
      event: "chainChanged",
      data: message.chainId
    }, window.location.origin);
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL2NvbnRlbnQvY29udGVudC1zY3JpcHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIGNvbnRlbnQvY29udGVudC1zY3JpcHQuanNcclxuICpcclxuICogQ29udGVudCBzY3JpcHQgdGhhdCBicmlkZ2VzIGNvbW11bmljYXRpb24gYmV0d2VlbiBpbnBhZ2UgcHJvdmlkZXIgYW5kIGJhY2tncm91bmQgc2VydmljZSB3b3JrZXJcclxuICovXHJcblxyXG4vLyBJbmplY3QgdGhlIGlucGFnZSBwcm92aWRlciBzY3JpcHQgaW50byB0aGUgcGFnZVxyXG5jb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuc2NyaXB0LnNyYyA9IGNocm9tZS5ydW50aW1lLmdldFVSTCgnaW5wYWdlLmpzJyk7XHJcbnNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICB0aGlzLnJlbW92ZSgpO1xyXG59O1xyXG4oZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcblxyXG4vLyBDb250ZW50IHNjcmlwdCBpbml0aWFsaXplZFxyXG5cclxuLy8gTGlzdGVuIGZvciBtZXNzYWdlcyBmcm9tIHRoZSBpbnBhZ2UgcHJvdmlkZXJcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBhc3luYyAoZXZlbnQpID0+IHtcclxuICAvLyBPbmx5IGFjY2VwdCBtZXNzYWdlcyBmcm9tIHNhbWUgd2luZG93XHJcbiAgaWYgKGV2ZW50LnNvdXJjZSAhPT0gd2luZG93KSByZXR1cm47XHJcblxyXG4gIC8vIE9ubHkgaGFuZGxlIG1lc3NhZ2VzIG1lYW50IGZvciB0aGUgY29udGVudCBzY3JpcHRcclxuICBpZiAoZXZlbnQuZGF0YS50YXJnZXQgIT09ICdoZWFydHdhbGxldC1jb250ZW50c2NyaXB0JykgcmV0dXJuO1xyXG5cclxuICBjb25zdCB7IHR5cGUsIHJlcXVlc3RJZCwgbWV0aG9kLCBwYXJhbXMgfSA9IGV2ZW50LmRhdGE7XHJcblxyXG4gIGlmICh0eXBlICE9PSAnV0FMTEVUX1JFUVVFU1QnKSByZXR1cm47XHJcblxyXG4gIC8vIEZvcndhcmRpbmcgcmVxdWVzdFxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gRm9yd2FyZCByZXF1ZXN0IHRvIGJhY2tncm91bmQgc2VydmljZSB3b3JrZXJcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICB0eXBlOiAnV0FMTEVUX1JFUVVFU1QnLFxyXG4gICAgICByZXF1ZXN0SWQsXHJcbiAgICAgIG1ldGhvZCxcclxuICAgICAgcGFyYW1zLFxyXG4gICAgICBvcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlY2VpdmVkIHJlc3BvbnNlXHJcblxyXG4gICAgLy8gU0VDVVJJVFk6IFNlbmQgcmVzcG9uc2UgYmFjayB0byBpbnBhZ2UgcHJvdmlkZXIgd2l0aCBzcGVjaWZpYyBvcmlnaW5cclxuICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHRhcmdldDogJ2hlYXJ0d2FsbGV0LWlucGFnZScsXHJcbiAgICAgIHJlcXVlc3RJZCxcclxuICAgICAgbWV0aG9kLFxyXG4gICAgICByZXN1bHQ6IHJlc3BvbnNlLnJlc3VsdCxcclxuICAgICAgZXJyb3I6IHJlc3BvbnNlLmVycm9yXHJcbiAgICB9LCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ/Cfq4AgQ29udGVudCBzY3JpcHQgZXJyb3I6JywgZXJyb3IpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIGV4dGVuc2lvbiBjb250ZXh0IHdhcyBpbnZhbGlkYXRlZCAoaGFwcGVucyBhZnRlciBleHRlbnNpb24gcmVsb2FkKVxyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRXh0ZW5zaW9uIGNvbnRleHQgaW52YWxpZGF0ZWQnKSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ/Cfq4AgSGVhcnRXYWxsZXQgZXh0ZW5zaW9uIHdhcyByZWxvYWRlZC4gUGxlYXNlIHJlZnJlc2ggdGhpcyBwYWdlIHRvIHJlY29ubmVjdC4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTRUNVUklUWTogU2VuZCBlcnJvciBiYWNrIHRvIGlucGFnZSBwcm92aWRlciB3aXRoIHNwZWNpZmljIG9yaWdpblxyXG4gICAgd2luZG93LnBvc3RNZXNzYWdlKHtcclxuICAgICAgdGFyZ2V0OiAnaGVhcnR3YWxsZXQtaW5wYWdlJyxcclxuICAgICAgcmVxdWVzdElkLFxyXG4gICAgICBtZXRob2QsXHJcbiAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgICAgY29kZTogLTMyNjAzXHJcbiAgICAgIH1cclxuICAgIH0sIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBMaXN0ZW4gZm9yIGV2ZW50cyBmcm9tIGJhY2tncm91bmQgKGFjY291bnQvY2hhaW4gY2hhbmdlcylcclxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkgPT4ge1xyXG4gIGlmIChtZXNzYWdlLnR5cGUgPT09ICdBQ0NPVU5UU19DSEFOR0VEJykge1xyXG4gICAgLy8gU0VDVVJJVFk6IFNlbmQgZXZlbnQgd2l0aCBzcGVjaWZpYyBvcmlnaW5cclxuICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHRhcmdldDogJ2hlYXJ0d2FsbGV0LWlucGFnZScsXHJcbiAgICAgIHR5cGU6ICdFVkVOVCcsXHJcbiAgICAgIGV2ZW50OiAnYWNjb3VudHNDaGFuZ2VkJyxcclxuICAgICAgZGF0YTogbWVzc2FnZS5hY2NvdW50c1xyXG4gICAgfSwgd2luZG93LmxvY2F0aW9uLm9yaWdpbik7XHJcbiAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdDSEFJTl9DSEFOR0VEJykge1xyXG4gICAgLy8gU0VDVVJJVFk6IFNlbmQgZXZlbnQgd2l0aCBzcGVjaWZpYyBvcmlnaW5cclxuICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7XHJcbiAgICAgIHRhcmdldDogJ2hlYXJ0d2FsbGV0LWlucGFnZScsXHJcbiAgICAgIHR5cGU6ICdFVkVOVCcsXHJcbiAgICAgIGV2ZW50OiAnY2hhaW5DaGFuZ2VkJyxcclxuICAgICAgZGF0YTogbWVzc2FnZS5jaGFpbklkXHJcbiAgICB9LCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gQ29udGVudCBzY3JpcHQgcmVhZHlcclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU9BLE1BQU0sU0FBUyxTQUFTLGNBQWMsUUFBUTtBQUM5QyxPQUFPLE1BQU0sT0FBTyxRQUFRLE9BQU8sV0FBVztBQUM5QyxPQUFPLFNBQVMsV0FBVztBQUN6QixPQUFLLE9BQU07QUFDYjtBQUFBLENBQ0MsU0FBUyxRQUFRLFNBQVMsaUJBQWlCLFlBQVksTUFBTTtBQUs5RCxPQUFPLGlCQUFpQixXQUFXLE9BQU8sVUFBVTtBQUVsRCxNQUFJLE1BQU0sV0FBVyxPQUFRO0FBRzdCLE1BQUksTUFBTSxLQUFLLFdBQVcsNEJBQTZCO0FBRXZELFFBQU0sRUFBRSxNQUFNLFdBQVcsUUFBUSxPQUFNLElBQUssTUFBTTtBQUVsRCxNQUFJLFNBQVMsaUJBQWtCO0FBSS9CLE1BQUk7QUFFRixVQUFNLFdBQVcsTUFBTSxPQUFPLFFBQVEsWUFBWTtBQUFBLE1BQ2hELE1BQU07QUFBQSxNQUNOO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLFFBQVEsT0FBTyxTQUFTO0FBQUEsSUFDOUIsQ0FBSztBQUtELFdBQU8sWUFBWTtBQUFBLE1BQ2pCLFFBQVE7QUFBQSxNQUNSO0FBQUEsTUFDQTtBQUFBLE1BQ0EsUUFBUSxTQUFTO0FBQUEsTUFDakIsT0FBTyxTQUFTO0FBQUEsSUFDdEIsR0FBTyxPQUFPLFNBQVMsTUFBTTtBQUFBLEVBRTNCLFNBQVMsT0FBTztBQUNkLFlBQVEsTUFBTSw0QkFBNEIsS0FBSztBQUcvQyxRQUFJLE1BQU0sV0FBVyxNQUFNLFFBQVEsU0FBUywrQkFBK0IsR0FBRztBQUM1RSxjQUFRLEtBQUssK0VBQStFO0FBQUEsSUFDOUY7QUFHQSxXQUFPLFlBQVk7QUFBQSxNQUNqQixRQUFRO0FBQUEsTUFDUjtBQUFBLE1BQ0E7QUFBQSxNQUNBLE9BQU87QUFBQSxRQUNMLFNBQVMsTUFBTSxXQUFXO0FBQUEsUUFDMUIsTUFBTTtBQUFBLE1BQ2Q7QUFBQSxJQUNBLEdBQU8sT0FBTyxTQUFTLE1BQU07QUFBQSxFQUMzQjtBQUNGLENBQUM7QUFHRCxPQUFPLFFBQVEsVUFBVSxZQUFZLENBQUMsU0FBUyxRQUFRLGlCQUFpQjtBQUN0RSxNQUFJLFFBQVEsU0FBUyxvQkFBb0I7QUFFdkMsV0FBTyxZQUFZO0FBQUEsTUFDakIsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsTUFBTSxRQUFRO0FBQUEsSUFDcEIsR0FBTyxPQUFPLFNBQVMsTUFBTTtBQUFBLEVBQzNCLFdBQVcsUUFBUSxTQUFTLGlCQUFpQjtBQUUzQyxXQUFPLFlBQVk7QUFBQSxNQUNqQixRQUFRO0FBQUEsTUFDUixNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsTUFDUCxNQUFNLFFBQVE7QUFBQSxJQUNwQixHQUFPLE9BQU8sU0FBUyxNQUFNO0FBQUEsRUFDM0I7QUFDRixDQUFDOyJ9
